{"version":3,"sources":["pages/burger-page.module.css","components/modal-overlay/modal-overlay.module.css","components/order-details/order-details.module.css","components/ingredient-type/ingredient-type.module.css","components/app-header/app-header.module.css","pages/ingredient-page.module.css","components/ingredient-details/ingredient-details.module.css","pages/profile.module.css","components/menu-item/menu-item.tsx","components/app-header/app-header.tsx","services/types/hooks.ts","utils/Api.ts","services/constants/index.ts","components/constructor-item/constructor-item.tsx","images/Subtract.svg","components/order-registration/order-registration.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/done.svg","components/order-details/order-details.tsx","utils/utils.ts","components/burger-constructor/burger-constructor.tsx","services/actions/order-details.ts","components/ingredient/ingredient.tsx","components/ingredient-type/ingredient-type.tsx","components/burger-ingredients/burger-ingredients.tsx","pages/burger-constructor-page.tsx","pages/login-page.tsx","services/actions/user-data.tsx","pages/registration.tsx","pages/recovery.tsx","pages/reset.tsx","components/form-element/form-element.tsx","pages/profile.tsx","components/preloader/preloader.tsx","components/protected-route/protected-route.tsx","pages/ingredient-page.tsx","components/ingredient-details/ingredient-details.tsx","components/app/app.tsx","services/actions/burger-ingredients.ts","reportWebVitals.ts","services/reducers/burger-ingredients.ts","services/reducers/ingredient.ts","services/reducers/order-details.ts","services/reducers/burger-constructor.ts","services/reducers/user.tsx","services/reducers/index.ts","index.tsx","pages/login-page.module.css","pages/registration.module.css","pages/recovery.module.css","pages/reset.module.css","components/burger-constructor/burger-constructor.module.css","components/ingredient/ingredient.module.css","components/form-element/form-element.module.css","components/modal/modal.module.css","components/burger-ingredients/burger-ingredients.module.css","components/app/app.module.css","components/constructor-item/constructor-item.module.css","components/preloader/preloader.module.css"],"names":["module","exports","MenuItem","props","className","styles","children","text","textStyles","AppHeader","location","useLocation","isActivePage","path","pathname","headerStyles","header","header__navigation","header__list","to","link","activenavlink","navlink","header__item","type","header__logo","useSelector","selectorHook","useDispatch","dispatchHook","url","headers","this","res","ok","json","then","Promise","reject","fetch","method","checkResponse","arrayOfId","token","body","JSON","stringify","email","password","name","match","ADD_ITEM","ADD_BUN","DELETE_INGREDIENT","REORDER_INGREDIENTS","CLEAN_STATE","BURGER_DATA_REQUEST","BURGER_DATA_SUCCESS","BURGER_DATA_ERROR","ADD_AMMOUNT","DECREASE_AMOUNT","CLEAN_INGREDIENTS_AMOUNTS","CLICK_ON_INGREDIENT","CLICK_ON_CLOSE_BUTTON","OPEN_ORDER_POPUP","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_ERROR","CLOSE_ORDER_POPUP","RESET_REQUEST","RESET_SUCCESS","RESET_ERROR","SET_PASSWORD_SUCCESS","CREATE_USER_REQUEST","CREATE_USER_SUCCESS","LOGIN_SUCCESS","USER_DATA_REQUEST","USER_DATA_SUCCESS","CHANGE_NAME","CHANGE_EMAIL","CHANGE_PASSWORD","USER_LOGOUT","ConstructorItem","elements","state","constructorState","ref","React","useRef","dispatch","id","index","useDrag","item","collect","monitor","opacity","isDragging","drag","useDrop","accept","isHover","isOver","hover","current","dragIndex","hoverIndex","newCards","dragCard","splice","data","moveCard","drop","itemStyle","itemStyles","constructoritem__hoverelement","constructoritem__element","style","OrderRegistration","store","currentOrder","orderButtonIsClicked","requestIsSuccessed","cost","src","image","alt","size","disabled","onClick","clickHandler","ModalOverlay","forwardRef","overlayStyles","overlay","closeFunction","Modal","modalRef","modalRoot","document","getElementById","closeByEsc","evt","key","closeModal","useEffect","addEventListener","removeEventListener","ReactDOM","createPortal","popupStyles","popup","target","closeByClickOverlay","modal","modalHeaderStyles","headerText","modalStyles","popup__closeicon","OrderDetails","orderDetailsStyles","order__conteiner","number","orderDoneImage","calculateCost","bunPrice","reduce","price","setCookie","value","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","cookie","getCookie","matches","RegExp","replace","decodeURIComponent","undefined","deleteCookie","refreshMainToken","Api","refreshToken","accessToken","split","BurgerConstructor","history","useHistory","orderNumber","ingredients","burgerData","bun","isDrag","canDrop","itemId","filter","_id","map","uid","now","Math","random","bunItem","find","dropTarget","itemRemove","useCallback","itemKey","orderDetailsRequestSending","idArray","idData","getOrderNumber","order","orderData","result","success","catch","err","orderPopupClose","consructorStyles","burgerconstructor__dropconteiner","burgerconstructor__conteiner","cartStyle","length","burgerconstructor__elementswithscroll","burgerconstructor__elements","Array","of","isLocked","thumbnail","image_mobile","handleClose","burgerconstructor__cost","burgerconstructor__modalheader","Ingredient","dragRef","selectIngredient","currentTarget","cardStyles","background","ingredient__item","amount","count","ingredient__image","ingredient__info","ingredient__text","memo","IngredientType","ingredientName","сolumnsStyle","column","BurgerIngredients","useState","setCurrent","bunsRef","soucesRef","fillingsRef","ingredientsStyles","burger__tabs","burger__nav","active","scrollIntoView","behavior","burger__ingredients","onScroll","e","scrollPosition","scrollTop","positionOfSouceContainer","offsetTop","positionofFillingsContainer","determineElementPosition","Constructor","constructor","DndProvider","backend","HTML5Backend","LoginPage","userName","userState","emailInputValue","setEmailValue","passwordInputValue","setPasswordValue","from","pagestyle","form","onSubmit","preventDefault","loginRequest","user","status","loginUser","inputsfield","onChange","redirectmenu","registration","RegistrationPage","userEmail","isUserSent","console","log","nameInputValue","setNameInput","setEmailInput","setPasswordInput","newUserCreating","createNewUser","payload","createUser","placeholder","RecoveryPage","resetAnswer","resetPending","setValue","sendResetPasswordRequest","event","setPasswordReset","getPasswordReset","ResetPage","isPasswordChanged","setPasswordInputValue","tokenInputValue","setTokenInputValue","error","setError","visible","setVisible","inputRef","resetUserPassword","setNewPassword","errorText","icon","onBlur","onIconClick","setTimeout","focus","FormElement","formName","formEmail","formPassword","nameInputRef","loginInputRef","passwordInputRef","formelement","refreshUser","fieldset","buttonconteiner","ProfilePage","interval","setInterval","clearInterval","profileconteiner","navconteiner","navmenu","list","listelement","currentlinktext","linktext","logoutRequest","blockquote","Preloader","loaderStyles","loaderConteiner","lds_ripple","ProtectedRoute","redirectPath","check","exact","render","IngredientPage","currentSelect","currentItem","useParams","setState","findCurrent","ingredientModalStyles","modal__conteiner","modal__image","modal__list","modal__listelement","modal__text","calories","proteins","fat","carbohydrates","IngredientDetails","App","action","dataRequest","refresh","getBurgerIngredientsData","getUser","getUserData","app","modal__header","goBack","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","dataRequestFailed","currentChoiceInitialState","itemIsClicked","orderInitialState","orderRequest","orderFailure","wholeOrder","buttonState","constructorInitialState","userInitialState","resetPasswordError","userPassword","loginStatus","rootReducer","combineReducers","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","StrictMode"],"mappings":"uGACAA,EAAOC,QAAU,CAAC,YAAc,mC,oBCAhCD,EAAOC,QAAU,CAAC,QAAU,iC,oBCA5BD,EAAOC,QAAU,CAAC,iBAAmB,wCAAwC,mBAAqB,4C,oBCAlGD,EAAOC,QAAU,CAAC,OAAS,kC,mBCA3BD,EAAOC,QAAU,CAAC,OAAS,2BAA2B,KAAO,yBAAyB,QAAU,4BAA4B,cAAgB,kCAAkC,mBAAqB,uCAAuC,aAAe,iCAAiC,aAAe,iCAAiC,aAAe,mC,mBCAzVD,EAAOC,QAAU,CAAC,iBAAmB,0CAA0C,aAAe,sCAAsC,YAAc,qCAAqC,mBAAqB,4CAA4C,YAAc,uC,mBCAtQD,EAAOC,QAAU,CAAC,iBAAmB,6CAA6C,aAAe,yCAAyC,YAAc,wCAAwC,mBAAqB,+CAA+C,YAAc,0C,mBCAlRD,EAAOC,QAAU,CAAC,iBAAmB,kCAAkC,QAAU,yBAAyB,KAAO,sBAAsB,YAAc,6BAA6B,gBAAkB,iCAAiC,SAAW,0BAA0B,aAAe,8BAA8B,WAAa,8B,kKCG5T,SAASC,EAASC,GAExB,OACE,qBAAIC,UAAWD,EAAME,OAArB,UACGF,EAAMG,SACNH,EAAMI,MAAQ,mBAAIH,UAAWD,EAAMK,WAArB,SAAmCL,EAAMI,U,kBCCjDE,EAA+B,WAC1C,IAAMC,EAAWC,cAGXC,EAAe,SAACC,GACpB,OAAOH,EAASI,WAAaD,GAG/B,OACE,wBAAQT,UAAWW,IAAaC,OAAhC,SACE,qBAAKZ,UAAWW,IAAaE,mBAA7B,SACE,qBAAIb,UAAWW,IAAaG,aAA5B,UACE,cAAC,IAAD,CAAMC,GAAG,IAAIf,UAAWW,IAAaK,KAArC,SACE,cAAClB,EAAD,CAAUK,KAAK,qEAAcC,WAAYI,EAAa,KAAb,UAAuBG,IAAaM,cAApC,gFAA2HN,IAAaO,SAAWjB,OAAM,UAAKU,IAAaQ,aAAlB,cAAlM,SACE,cAAC,aAAD,CAAYC,KAAMZ,EAAa,KAAO,UAAY,kBAGtD,cAAC,IAAD,CAAMO,GAAG,GAAGf,UAAWW,IAAaK,KAApC,SACE,cAAClB,EAAD,CAAUK,KAAK,4EAAgBC,WAAYI,EAAa,IAAb,UAAsBG,IAAaM,cAAnC,gFAA0HN,IAAaO,SAAWjB,OAAM,UAAKU,IAAaQ,aAAlB,cAAnM,SACE,cAAC,WAAD,CAAUC,KAAMZ,EAAa,IAAM,UAAY,kBAGnD,cAACV,EAAD,CAAUG,OAAQU,IAAaU,aAA/B,SACE,cAAC,OAAD,MAEF,cAAC,IAAD,CAAMN,GAAG,WAAWf,UAAWW,IAAaK,KAA5C,SACE,cAAClB,EAAD,CAAUK,KAAK,kFAAiBC,WAAYI,EAAa,YAAb,UAA8BG,IAAaM,cAA3C,gFAAkIN,IAAaO,SAAWjB,OAAM,UAAKU,IAAaQ,aAAlB,cAA5M,SACE,cAAC,cAAD,CAAaC,KAAMZ,EAAa,YAAc,UAAY,0B,yBCjC3Dc,EAAgDC,IAEhDC,EAAc,kBAAMC,e,kBC2IlB,M,WAtIb,cAA+B,IAAjBC,EAAgB,EAAhBA,IAAgB,yBAFtBA,SAEsB,OADtBC,aACsB,EAC5BC,KAAKF,IAAMA,EACXE,KAAKD,QAAU,CACb,eAAgB,oB,iDAIpB,SAAsBE,GAEpB,GAAIA,EAAIC,GAAM,OAAOD,EAAIE,OAASF,EAAIE,OAAOC,MAAK,SAAAH,GAAG,OAAII,QAAQC,OAAOL,Q,sCAK1E,WACE,OAAOM,MAAM,GAAD,OAAIP,KAAKF,IAAT,eAA2B,CACrCU,OAAQ,MACRT,QAAS,CAAE,eAAgB,sBAC1BK,KAAKJ,KAAKS,iB,4BAGf,SAAeC,EAA0BC,GACvC,OAAOJ,MAAM,GAAD,OAAIP,KAAKF,IAAT,UAAsB,CAChCU,OAAQ,OACRT,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAYY,GAE/BC,KAAMC,KAAKC,UAAU,CAAE,YAAeJ,MACrCN,KAAKJ,KAAKS,iB,8BAGf,SAAiBM,EAAeJ,GAC9B,OAAOJ,MAAM,GAAD,OAAIP,KAAKF,IAAT,kBAA8B,CACxCU,OAAQ,OACRT,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAYY,GAE/BC,KAAMC,KAAKC,UAAU,CAAE,MAASC,MAC/BX,KAAKJ,KAAKS,iB,4BAGf,SAAeO,EAAkBL,GAC/B,OAAOJ,MAAM,GAAD,OAAIP,KAAKF,IAAT,wBAAoC,CAC9CU,OAAQ,OACRT,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAYY,GAE/BC,KAAMC,KAAKC,UAAU,CACnB,SAAYE,EACZ,MAASL,MAEVP,KAAKJ,KAAKS,iB,2BAGf,SAAcM,EAAeC,EAAkBC,EAAcN,GAC3D,OAAOJ,MAAM,GAAD,OAAIP,KAAKF,IAAT,iBAA6B,CACvCU,OAAQ,OACRT,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAYY,GAE/BC,KAAMC,KAAKC,UAAU,CACnB,MAASC,EACT,SAAYC,EACZ,KAAQC,MAETb,KAAKJ,KAAKS,iB,0BAGf,SAAaM,EAAeC,EAAkBL,GAC5C,OAAOJ,MAAM,GAAD,OAAIP,KAAKF,IAAT,cAA0B,CACpCU,OAAQ,OACRT,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAYY,GAE/BC,KAAMC,KAAKC,UAAU,CACnB,MAASC,EACT,SAAYC,MAEbZ,KAAKJ,KAAKS,iB,0BAGf,SAAaE,GACX,OAAOJ,MAAM,GAAD,OAAIP,KAAKF,IAAT,cAA0B,CACpCU,OAAQ,OACRT,QAAS,CAAE,eAAgB,oBAC3Ba,KAAMC,KAAKC,UAAU,CAAE,MAASH,MAC/BP,KAAKJ,KAAKS,iB,2BAGf,SAAcS,GACZ,OAAOX,MAAM,GAAD,OAAIP,KAAKF,IAAT,eAA2B,CACrCU,OAAQ,OACRT,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAYmB,GAE/BN,KAAMC,KAAKC,UAAU,CAAE,MAASI,MAC/Bd,KAAKJ,KAAKS,iB,qBAGf,SAAQE,GACN,OAAOJ,MAAM,GAAD,OAAIP,KAAKF,IAAT,aAAyB,CACnCU,OAAQ,MACRT,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAYY,KAE9BP,KAAKJ,KAAKS,iB,yBAGf,SAAYM,EAAeC,EAAkBC,EAAcN,GACzD,OAAOJ,MAAM,GAAD,OAAIP,KAAKF,IAAT,aAAyB,CACnCU,OAAQ,QACRT,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAYY,GAE/BC,KAAMC,KAAKC,UAAU,CACnB,MAASC,EACT,SAAYC,EACZ,KAAQC,MAETb,KAAKJ,KAAKS,mB,KAOF,CAAQ,CACrBX,IA/Ic,2CCHHqB,EAAuB,WACvBC,EAAqB,UACrBC,EAAyC,oBACzCC,EAA6C,sBAC7CC,EAA6B,cAG7BC,EAA6C,sBAC7CC,EAA6C,sBAC7CC,EAAyC,oBACzCC,EAA4B,aAC5BC,EAAqC,kBACrCC,EAAyD,4BAGzDC,EAA6C,sBAC7CC,EAAiD,wBAGjDC,EAAuC,mBACvCC,EAAyC,oBACzCC,EAAyC,oBACzCC,EAAqC,kBACrCC,EAAyC,oBAEzCC,EAAiC,gBACjCC,EAAiC,gBACjCC,EAA6B,cAI7BC,EAA+C,uBAG/CC,EAA6C,sBAC7CC,EAA6C,sBAI7CC,EAAiC,gBAGjCC,EAA0C,qBAC1CC,EAAyC,oBAGzCC,EAA6B,cAC7BC,EAA+B,eAC/BC,EAAqC,kBAGrCC,GAA6B,c,sHC3C7BC,GAAuD,SAAC/E,GACnE,IAAQgF,EAAazD,GAAY,SAAA0D,GAAK,OAAIA,EAAMC,oBAAxCF,SACFG,EAAMC,IAAMC,OAAsB,MAClCC,EAAW7D,IACT8D,EAAcvF,EAAduF,GAAIC,EAAUxF,EAAVwF,MAYZ,MAA4BC,aAAQ,CAClCpE,KAAM,UACNqE,KAAM,CAAEH,KAAIC,SACZG,QAAS,SAAAC,GAAO,MAAK,CACnBC,QAASD,EAAQE,aAAe,GAAM,MAJ1C,oBAASD,EAAT,KAASA,QAAWE,EAApB,KAQA,EAA4BC,aAAQ,CAClCC,OAAQ,UACRN,QAAS,SAAAC,GAAO,MAAK,CAAEM,QAASN,EAAQO,WACxCC,MAHkC,SAG5BV,GACAA,EAAKF,QAAUA,GAGdL,EAAIkB,WAxBb,SAAkBC,EAAmBC,GACnC,IAAIC,EAAQ,aAAOxB,GACfyB,EAAWD,EAASF,GACxBE,EAASE,OAAOJ,EAAW,GAC3BE,EAASE,OAAOH,EAAY,EAAGE,GAC/BnB,EAAS,CAAEjE,KAAM8B,EAAqBwD,KAAMH,IAsB1CI,CAASlB,EAAKF,MAAOA,GACrBE,EAAKF,MAAQA,MAXjB,oBAASU,EAAT,KAASA,QAAWW,EAApB,KAeMC,EAAYZ,EAAUa,KAAWC,8BAAgCD,KAAWE,yBAKlF,OAFAlB,EAAKc,EAAK1B,IAGR,qBAAIA,IAAKA,EAAKlF,UAAS,eAAU6G,GAAaI,MAAO,CAAErB,WAAvD,UACE,cAAC,WAAD,CAAUxE,KAAK,YACdrB,EAAMG,aCvDE,OAA0B,qCCM5BgH,GAA2D,SAACnH,GACvE,MAAqDuB,GAAY,SAAA6F,GAAK,OAAIA,EAAMC,gBAAxEC,EAAR,EAAQA,qBAAsBC,EAA9B,EAA8BA,mBAE9B,OACE,sBAAKtH,UAAWD,EAAME,OAAtB,UACE,mBAAGD,UAAU,oCAAb,SAAkDD,EAAMwH,OACxD,qBAAKC,IAAKC,GAAOC,IAAI,SACrB,qBAAK1H,UAAU,QAAf,SACE,cAAC,SAAD,CAAQoB,KAAK,UAAUuG,KAAK,QAAQC,SAAUP,GAAwBC,EAAoBO,QAAS,kBAAM9H,EAAM+H,gBAA/G,mG,yCCVKC,GAAe5C,IAAM6C,YAA0C,SAACjI,EAAOmF,GAElF,OACE,qBAAKA,IAAKA,EAAKlF,UAAWiI,KAAcC,QAASL,QAAS9H,EAAMoI,mBCEvDC,GAAkC,SAACrI,GAE9C,IAAMsI,EAAWlD,IAAMC,OAAuB,MACxCkD,EAAYC,SAASC,eAAe,cAG1C,SAASC,EAAWC,GACN,WAAZA,EAAIC,KAAoB5I,EAAM6I,aAiBhC,OATAC,qBAAU,WAGR,OAFAN,SAASO,iBAAiB,UAAWL,GAE9B,WACLF,SAASQ,oBAAoB,UAAWN,MAGzC,IAEIO,IAASC,aACb,sBAAKjJ,UAAWkJ,KAAYC,MAA5B,UACC,cAACpB,GAAD,CAAc7C,IAAKmD,EAAUF,cAAe,SAACO,IAhBjD,SAA6BA,GAE3BA,EAAIU,SAAWf,EAASjC,SAAWrG,EAAM6I,aAckDS,CAAoBX,MAC7G,sBAAK1I,UAAWkJ,KAAYI,MAA5B,UACE,sBAAKtJ,UAAWD,EAAMwJ,kBAAtB,UACGxJ,EAAMyJ,YAAc,oBAAIxJ,UAAWD,EAAM0J,YAArB,SAAoC1J,EAAMyJ,aAC/D,qBAAKxJ,UAAWkJ,KAAYQ,iBAA5B,SAA8C,cAAC,YAAD,CAAWtI,KAAK,UAAUyG,QAAS9H,EAAM6I,kBAExF7I,EAAMG,eAGRoI,I,qBC5CQ,OAA0B,iCCK5BqB,GAAiD,SAAC5J,GAE7D,OACE,sBAAKC,UAAS,UAAK4J,KAAmBC,iBAAxB,gBAAd,UACE,oBAAI7J,UAAU,mCAAd,SAAkDD,EAAM+J,SACxD,sBAAM9J,UAAU,mCAAhB,iIACA,qBAAKwH,IAAKuC,GAAgBrC,IAAI,yCAC9B,mBAAG1H,UAAU,oCAAb,qJACA,sBAAMA,UAAU,uDAAhB,gQCROgK,GAAgB,SAACjF,GAAgE,IAAlCkF,EAAiC,uDAAd,EAC7E,OAAQ,EAAIA,EAAYlF,EAASmF,QAAO,SAACrI,EAAK4D,GAC5C,OAAO5D,EAAM4D,EAAK0E,QACjB,IAGE,SAASC,GAAUvH,EAAcwH,EAAetK,GAErD,IAAIuK,GADJvK,EAAQA,GAAS,IACDwK,QAChB,GAAkB,iBAAPD,GAAmBA,EAAK,CACjC,IAAME,EAAI,IAAIC,KACdD,EAAEE,QAAQF,EAAEG,UAAkB,IAANL,GACxBA,EAAMvK,EAAMwK,QAAUC,EAEpBF,GAAOA,EAAIM,cACb7K,EAAMwK,QAAUD,EAAIM,eAGtB,IAAIC,EAAgBhI,EAAO,KAD3BwH,EAAQS,mBAAmBT,IAE3B,IAAK,IAAMU,KAAYhL,EAAO,CAC5B8K,GAAiB,KAAOE,EACxB,IAAMC,EAAYjL,EAAMgL,IACN,IAAdC,IACFH,GAAiB,IAAMG,GAG3BzC,SAAS0C,OAASJ,EAGb,SAASK,GAAUrI,GACxB,IAAMsI,EAAU5C,SAAS0C,OAAOnI,MAC9B,IAAIsI,OAAO,WAAavI,EAAKwI,QAAQ,+BAAgC,QAAU,aAIjF,OAAOF,EAAUG,mBAAmBH,EAAQ,SAAMI,EAG7C,SAASC,GAAc3I,GAC5BuH,GAAUvH,EAAM,GAAI,CAClB,WAAY,IAKR,SAAS4I,KAEf,IAAM3I,EAAQoI,GAAU,qBACdK,IAAVzI,GAAwB4I,EAAIC,aAAa7I,GAAOd,MAAK,SAAAH,GAASuI,GAAU,QAASvI,EAAI+J,YAAYC,MAAM,WAAW,IAAKzB,GAAU,eAAgBvI,EAAI8J,iBClChJ,IAAMG,GAAuC,WAClD,IAAMC,EAAUC,cACV3G,EAAW7D,IACjB,EAAkEF,GAAY,SAAA0D,GAAK,OAAIA,EAAMoC,gBAArFC,EAAR,EAAQA,qBAAsBC,EAA9B,EAA8BA,mBAAoB2E,EAAlD,EAAkDA,YAC1CC,EAAgB5K,GAAY,SAAA0D,GAAK,OAAIA,EAAMmH,cAA3CD,YACR,EAA0B5K,GAAY,SAAA0D,GAAK,OAAIA,EAAMC,oBAA7CF,EAAR,EAAQA,SAAUqH,EAAlB,EAAkBA,IAIZ7J,EAAQ2I,GAAU,SAOxB,MAAiCnF,aAAQ,CACvCC,OAAQ,OACRN,QAAS,SAAAC,GAAO,MAAK,CACnB0G,OAAQ1G,EAAQ2G,YAElB1F,KALuC,SAKlC2F,GACHlH,EAAS,CACPjE,KAAM2B,EAAU2D,KAAMwF,EAAYM,QAAO,SAAA/G,GACvC,OAAOA,EAAKgH,MAAQF,EAAOjH,IAAoB,QAAdG,EAAKrE,QACrCsL,KAAI,SAACjH,GAAW,OAAO,2BAAKA,GAAZ,IAAkBkH,IAZlClC,KAAKmC,MAAQC,KAAKC,gBAcvBzH,EAAS,CACPjE,KAAM4B,EAAS+J,QAASb,EAAYc,MAAK,SAAAvH,GACvC,OAAOA,EAAKgH,MAAQF,EAAOjH,IAAoB,QAAdG,EAAKrE,UAG1CiE,EAAS,CAAEjE,KAAMmC,EAAa+B,GAAIiH,EAAOjH,QAhB7C,oBAAS+G,EAAT,KAASA,OAAUY,EAAnB,KAqBMC,EAAa/H,IAAMgI,aAAY,SAACC,EAAiBb,GACrDlH,EAAS,CAAEjE,KAAM6B,EAAmBqC,GAAI8H,IACxC/H,EAAS,CAAEjE,KAAMoC,EAAiB8B,GAAIiH,MACrC,CAAClH,IAGEgI,EAA6B,WAE/B,IAAMvK,EAAQoI,GAAU,gBACxBpI,GAAS4I,EAAIC,aAAa7I,GAAOd,MAAK,SAAAH,GAASuI,GAAU,QAASvI,EAAI+J,YAAYC,MAAM,WAAW,IAAKzB,GAAU,eAAgBvI,EAAI8J,iBACnI3J,MAAK,WACJ,IAAMsL,EAAUvI,EAAS2H,KAAI,SAAAjH,GAAU,OAAOA,EAAKgH,OACnDpH,EAAS,CAAEjE,KAAMwC,IACjByB,ECjC8B,SAACkI,EAAiBhL,GACxD,OAAO,SAAU8C,GACfA,EAAS,CAAEjE,KAAMyC,IACjB6H,EAAI8B,eAAeD,EAAShL,GACzBP,MAAK,SAAAH,GACJwD,EAAS,CAAEjE,KAAM0C,EAAmB4C,KAAM7E,EAAI4L,MAAM3D,OAAQ4D,UAAW7L,EAAK8L,OAAQ9L,EAAI+L,aAEzFC,OAAM,SAAAC,GAASzI,EAAS,CAAEjE,KAAM2C,QD0BpByJ,CAAe,GAAD,oBAAKF,GAAL,CAAclB,EAAIK,MAAMlK,QAUjDwL,EAAkB5I,IAAMgI,aAAY,WACxC9H,EAAS,CAAEjE,KAAM4C,IACjBqB,EAAS,CAAEjE,KAAM+B,IACjBkC,EAAS,CAAEjE,KAAMqC,MAChB,CAAC4B,IAEE4B,EAAQoF,EAAS2B,KAAiBC,iCAAmCD,KAAiBE,6BACtFC,EAAYpJ,EAASqJ,QAAU,EAAIJ,KAAiBK,sCAAwCL,KAAiBM,4BAInH,OACEvJ,GAAY,sBAAKG,IAAK+H,EAAYjN,UAAS,6BAAwBiH,GAAvD,UACTmF,GAAOA,EAAIK,KAAO8B,MAAMC,GAAGpC,GAAKM,KAAI,SAACjH,EAAMF,GAAP,OACnC,cAAC,qBAAD,CAAgCnE,KAAK,MAAMqN,UAAU,EAAMtO,KAAI,UAAKsF,EAAK5C,KAAV,+BAAyBsH,MAAO1E,EAAK0E,MAAOuE,UAAWjJ,EAAKkJ,cAAlGpJ,MAG3B,oBAAIvF,UAAS,oBAAemO,GAA5B,SACGpJ,EAASyH,QAAO,SAAA/G,GAAU,MAAqB,QAAdA,EAAKrE,QAAkBsL,KAAI,SAACjH,EAAMF,GAAP,OAC3D,cAAC,GAAD,CAAiBD,GAAIG,EAAKkH,IAAKpH,MAAOA,EAAtC,SACE,cAAC,qBAAD,CAAoBpF,KAAMsF,EAAK5C,KAAM6L,UAAWjJ,EAAKkJ,aAAcxE,MAAO1E,EAAK0E,MAAOyE,YAAa,kBAAM1B,EAAWzH,EAAKkH,IAAKlH,EAAKgH,SADnFhH,EAAKkH,UAI1DP,GAAOA,EAAIK,KAAO8B,MAAMC,GAAGpC,GAAKM,KAAI,SAACjH,EAAMF,GAAP,OACnC,cAAC,qBAAD,CAAgCnE,KAAK,SAASqN,UAAU,EAAMtO,KAAI,UAAKsF,EAAK5C,KAAV,yBAAwBsH,MAAO1E,EAAK0E,MAAOuE,UAAWjJ,EAAKkJ,cAApGpJ,MAC3B,cAAC,GAAD,CAAmBuC,aAAc,gBACDyD,IAA9BL,GAAU,gBAAgCa,EAAQV,QAAQ,CAAE3K,SAAU,WAAc2M,KACnFpN,OAAM,gBAAW+N,KAAiBa,yBAA2BtH,KAAMyC,GAAcjF,EAAUqH,EAAIjC,SACjG9C,GAAwBC,GAAsB,cAAC,GAAD,CAAOsB,WAAYmF,EAAiBxE,kBAAmByE,KAAiBc,+BAAxE,SAAwG,cAAC,GAAD,CAAchF,OAAQmC,U,wCEjG7K8C,GAA6C,SAAChP,GAClD,IAAQuF,EAAsBvF,EAAtBuF,GAAIP,EAAkBhF,EAAlBgF,SAAUqH,EAAQrM,EAARqM,IACdF,EAAgB5K,GAAY,SAAA0D,GAAK,OAAIA,EAAMmH,cAA3CD,YAGF7G,EAAW7D,IACXlB,EAAWC,cAEjB,EAAoBiF,aAAQ,CAC1BpE,KAAM,OACNqE,KAAM,CAAEH,QAFD0J,EAAT,qBAKA,SAASC,EAAiBvG,EAAuBhC,GAC/C,OAAOA,EAAK8F,QAAO,SAAA/G,GACjB,OAAOA,EAAKgH,MAAQ/D,EAAIwG,cAAc5J,MAK1C,OACE,cAAC,IAAD,CAAMtF,UAAWmP,KAAWnO,KAAMD,GAAI,CACpCL,SAAS,gBAAD,OAAkBX,EAAMuF,IAChCN,MAAO,CAAEoK,WAAY9O,IAFvB,SAIE,qBAAI4E,IAAK8J,EAAS1J,GAAIvF,EAAMuF,GAAItF,UAAWmP,KAAWE,iBAAkBxH,QAAS,SAACa,GAAUrD,EAAS,CAAEjE,KAAMsC,EAAqB+B,KAAMwJ,EAAiBvG,EAAKwD,MAA9J,YACKnM,EAAMuP,UAAYvK,EAASqJ,QAAU,cAAC,UAAD,CAASmB,MAAOxP,EAAMuP,OAAQ3H,KAAK,cACxEyE,EAAIkD,QAAyB,QAAfvP,EAAMqB,MAAkBgL,EAAIK,MAAQnH,KAAQ8G,GAAO,cAAC,UAAD,CAASmD,MAAOnD,EAAIkD,OAAQ3H,KAAK,YACrG,qBAAK3H,UAAS,0BAAqBmP,KAAWK,mBAAqBhI,IAAKzH,EAAM0H,MAAOC,IAAK3H,EAAM8C,OAChG,sBAAK7C,UAAS,eAAUmP,KAAWM,kBAAnC,UACE,mBAAGzP,UAAU,qCAAb,SAAmDD,EAAMoK,QACzD,cAAC,eAAD,CAAc/I,KAAK,eAErB,mBAAGpB,UAAS,2CAAsCmP,KAAWO,kBAA7D,SAAkF3P,EAAM8C,aAQjFsC,OAAMwK,KAAKZ,I,qBCzCba,GAAiBzK,IAAM6C,YAAgD,SAACjI,EAAOmF,GAE1F,MAA0B5D,GAAY,SAAA0D,GAAK,OAAIA,EAAMC,oBAA7CmH,EAAR,EAAQA,IAAKrH,EAAb,EAAaA,SAGb,OACE,qCACE,oBAAIG,IAAKA,EAAKlF,UAAU,kCAAxB,SAA2DD,EAAM8P,iBACjE,oBAAI7P,UAAS,0BAAqB8P,KAAaC,QAA/C,SACGhQ,EAAM2G,MAAQ3G,EAAM2G,KAAKgG,KAAI,SAAAjH,GAAI,OAChC,cAAC,GAAD,yBAAYH,GAAIG,EAAKgH,KAAwBhH,GAA7C,IAAmD2G,IAAKA,EAAKrH,SAAUA,IAAxCU,EAAKgH,gBCVjCuD,GAAuC,WAElD,IAAQ9D,EAAgB5K,GAAY,SAAA0D,GAAK,OAAIA,EAAMmH,cAA3CD,YAGR,EAA8B/G,IAAM8K,SAAS,kCAA7C,oBAAO7J,EAAP,KAAgB8J,EAAhB,KACMC,EAAUhL,IAAMC,OAAuB,MACvCgL,EAAYjL,IAAMC,OAAuB,MACzCiL,EAAclL,IAAMC,OAAuB,MAiBjD,OAEE,sBAAKpF,UAAWsQ,KAAkBC,aAAlC,UACE,oBAAIvQ,UAAU,uCAAd,mGACA,qBAAIA,UAAS,gBAAWsQ,KAAkBE,aAA1C,UACE,6BACE,cAAC,MAAD,CAAKnG,MAAM,iCAAQoG,OAAoB,mCAAZrK,EAAqByB,QAAS,SAACwC,GAAY6F,EAAW7F,GAA4B,OAApB8F,EAAQ/J,SAAoB+J,EAAQ/J,QAAQsK,eAAe,CAAEC,SAAU,YAAhK,8CAIF,6BACE,cAAC,MAAD,CAAKtG,MAAM,iCAAQoG,OAAoB,mCAAZrK,EAAqByB,QAAS,SAACwC,GAAY6F,EAAW7F,GAA8B,OAAtB+F,EAAUhK,SAAoBgK,EAAUhK,QAAQsK,eAAe,CAAEC,SAAU,YAApK,8CAIF,6BACE,cAAC,MAAD,CAAKtG,MAAM,6CAAUoG,OAAoB,+CAAZrK,EAAuByB,QAAS,SAACwC,GAAY6F,EAAW7F,GAAgC,OAAxBgG,EAAYjK,SAAoBiK,EAAYjK,QAAQsK,eAAe,CAAEC,SAAU,YAA5K,6DAKJ,sBAAK3Q,UAAWsQ,KAAkBM,oBAAqBC,SAAU,SAACC,IAnCtE,SAAkCA,GAChC,IAAMC,EAAiBD,EAAE1H,OAAO4H,UAC1BC,EAAiD,OAAtBb,EAAUhK,SAAoBgK,EAAUhK,QAAQ8K,UAC3EC,EAAsD,OAAxBd,EAAYjK,SAAoBiK,EAAYjK,QAAQ8K,UAEtFhB,EADEa,EAAiB,KAAOE,EACf,iCAEJF,EAAiB,KAAOI,EACpB,iCAEA,8CAyBoEC,CAAyBN,IAAxG,UACE,cAAClB,GAAD,CAAgBC,eAAe,iCAAQnJ,KAAMwF,EAAYM,QAAO,SAAA/G,GAAI,MAAkB,QAAdA,EAAKrE,QAAiB8D,IAAKiL,IACnG,cAACP,GAAD,CAAgBC,eAAe,iCAAQnJ,KAAMwF,EAAYM,QAAO,SAAA/G,GAAI,MAAkB,UAAdA,EAAKrE,QAAmB8D,IAAKkL,IACrG,cAACR,GAAD,CAAgBC,eAAe,6CAAUnJ,KAAMwF,EAAYM,QAAO,SAAA/G,GAAI,MAAkB,SAAdA,EAAKrE,QAAkB8D,IAAKmL,WChDjGgB,GAAiC,WAG5C,OAEE,yBAASrR,UAAS,UAAKiH,KAAMqK,aAA7B,SACE,eAACC,GAAA,EAAD,CAAaC,QAASC,KAAtB,UACE,cAAC,GAAD,IACA,cAAC,GAAD,U,oBCVKC,GAA+B,WAC1C,IAqBa,EArBPpR,EAAWC,cAGX8E,EAAW7D,IACTmQ,EAAarQ,GAAY,SAAA0D,GAAK,OAAIA,EAAM4M,aAAxCD,SACR,EAAyCxM,IAAM8K,SAAS,IAAxD,oBAAO4B,EAAP,KAAwBC,EAAxB,KACA,EAA+C3M,IAAM8K,SAAS,IAA9D,oBAAO8B,EAAP,KAA2BC,EAA3B,KAEMzP,EAAQ2I,GAAU,SAazB,OAAIyG,EAEC,cAAC,IAAD,CAAU5Q,IAAK,UAAAT,EAAS0E,aAAT,eAAgBiN,OAAQ,MAOzC,mCAEE,qBAAKjS,UAAWC,KAAOiS,UAAvB,SACE,uBAAMlS,UAAWC,KAAOkS,KAAMC,SAAU,SAACtB,GAA0CA,EAAEuB,iBAAkBhN,ECyG5E,SAAC1C,EAAeC,EAAkBL,GACnE,OAAO,SAAU8C,GACfA,EAAS,CAAEjE,KhBhH+B,kBgBiH1CsK,EAAI4G,aAAa3P,EAAOC,EAAUL,GAC/BP,MAAK,SAAAH,GACJuI,GAAU,QAASvI,EAAI+J,YAAYC,MAAM,WAAW,GAAI,CAAEtB,QAAS,OACnEH,GAAU,eAAgBvI,EAAI8J,cAC9BtG,EAAS,CAAEjE,KAAMmD,EAAe5B,MAAOd,EAAI0Q,KAAK5P,MAAOE,KAAMhB,EAAI0Q,KAAK1P,KAAM2P,OAAQ3Q,EAAI+L,aAEzFC,OAAM,SAAAC,GAAG,OAAIzI,EAAS,CAAEjE,KhBrHW,oBeG8EqR,CAAUZ,EAAiBE,EAAoBxP,KAA/J,UACE,2BAAUvC,UAAWC,KAAOyS,YAA5B,UACE,oBAAI1S,UAAS,qCAAgCC,KAAOW,QAApD,sCACA,cAAC,aAAD,CAAY+R,SAzBU,SAAC7B,GAC/BgB,EAAchB,EAAE1H,OAAOiB,QAwBgCA,MAAOwH,EAAiBhP,KAAM,UAC7E,cAAC,gBAAD,CAAe8P,SAvBI,SAAC7B,GAC5BkB,EAAiBlB,EAAE1H,OAAOiB,QAsB6BA,MAAO0H,EAAoBlP,KAAM,gBAElF,cAAC,SAAD,CAAQzB,KAAK,UAAUuG,KAAK,SAA5B,4CACA,sBAAK3H,UAAS,UAAKC,KAAO2S,aAAZ,eAAd,UACE,mBAAG5S,UAAS,UAAKC,KAAO4S,aAAZ,qDAAZ,0IACA,cAAC,IAAD,CAAM7S,UAAS,UAAKC,KAAOe,KAAZ,gCAAgDD,GAAG,YAAlE,6HAEF,sBAAKf,UAAWC,KAAO2S,aAAvB,UACE,mBAAG5S,UAAS,UAAKC,KAAO2C,SAAZ,qDAAZ,wFACA,cAAC,IAAD,CAAM5C,UAAS,UAAKC,KAAOe,KAAZ,gCAAgDD,GAAG,mBAAlE,sI,oBEhDC+R,GAAsC,WACjD,IAAMzN,EAAW7D,IACjB,EAA4CF,GAAY,SAAA0D,GAAK,OAAIA,EAAM4M,aAA/DmB,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,WAAYrB,EAA/B,EAA+BA,SAC/BsB,QAAQC,IAAIH,GACZ,MAAuC5N,IAAM8K,SAAS,IAAtD,oBAAOkD,EAAP,KAAuBC,EAAvB,KACA,EAAyCjO,IAAM8K,SAAS,IAAxD,oBAAO4B,EAAP,KAAwBwB,EAAxB,KACA,EAA+ClO,IAAM8K,SAAS,IAA9D,oBAAO8B,EAAP,KAA2BuB,EAA3B,KACM/Q,EAAQ2I,GAAU,SAWlBqI,EAAkB,SAAC7K,GACvBA,EAAI2J,iBACJhN,ED2GgC,SAAC1C,EAAeC,EAAkBC,EAAaN,GACjF,OAAO,SAAU8C,GACfA,EAAS,CAAEjE,KAAMiD,IACjBqH,EAAI8H,cAAc7Q,EAAOC,EAAUC,EAAMN,GACtCP,MAAK,SAAAH,GACJuI,GAAU,QAASvI,EAAI+J,YAAYC,MAAM,WAAW,GAAI,CAAEtB,QAAS,OACnEH,GAAU,eAAgBvI,EAAI8J,cAC9BtG,EAAS,CAAEjE,KAAMkD,EAAqBmP,QAAS5R,OAEhDgM,OAAM,SAAAC,GAAG,OAAIzI,EAAS,CAAEjE,KhB5GuB,0BiBRzCsS,CAAW7B,EAAiBE,EAAoBoB,EAAe5Q,IACxE6Q,EAAa,IACbC,EAAc,IACdC,EAAiB,KAGnB,OAAI3B,EAEA,cAAC,IAAD,CAAU5Q,GAAG,MAKf,qBAAKf,UAAWC,KAAOiS,UAAvB,SACE,uBAAMlS,UAAWC,KAAOkS,KAAMC,SAAU,SAAC1J,GAAD,OAAS6K,EAAgB7K,IAAjE,UACE,2BAAU1I,UAAWC,KAAOyS,YAA5B,UACE,oBAAI1S,UAAS,qCAAgCC,KAAOW,QAApD,gFACA,cAAC,QAAD,CAAOQ,KAAK,OAAOiJ,MAAO8I,EAAgBR,SA7B7B,SAAC7B,GACpBsC,EAAatC,EAAE1H,OAAOiB,QA4BkDsJ,YAAa,SAC/E,cAAC,aAAD,CAAYhB,SA3BE,SAAC7B,GACrBuC,EAAcvC,EAAE1H,OAAOiB,QA0BoBA,MAAOwH,EAAiBhP,KAAM,UACnE,cAAC,gBAAD,CAAe8P,SAzBE,SAAC7B,GACxBwC,EAAiBxC,EAAE1H,OAAOiB,QAwBuBA,MAAO0H,EAAoBlP,KAAM,gBAE9E,cAAC,SAAD,CAAQzB,KAAK,UAAUuG,KAAK,SAA5B,SAAuCqL,EAAa,8FAAqB,iHACzE,sBAAKhT,UAAS,UAAKC,KAAO2S,aAAZ,WAAd,UACE,mBAAG5S,UAAS,UAAKC,KAAO4S,aAAZ,qDAAZ,kIACA,cAAC,IAAD,CAAM7S,UAAS,UAAKC,KAAOe,KAAZ,gCAAgDD,GAAG,SAAlE,qD,oBC3CG6S,GAAkC,WAC7C,MAAgDtS,GAAY,SAAA0D,GAAK,OAAIA,EAAM4M,aAAnEiC,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,aAAcnC,EAAnC,EAAmCA,SAC7BpP,EAAQ2I,GAAU,SAClB7F,EAAW7D,IACjB,EAA0B2D,IAAM8K,SAAS,IAAzC,oBAAO5F,EAAP,KAAc0J,EAAd,KAMMC,EAA2B,SAAC3J,EAAe4J,GAC1C,OAALA,QAAK,IAALA,KAAO5B,iBACPhN,EFgGsC,SAAC1C,EAAeJ,GACxD,OAAO,SAAU8C,GACfA,EAAS,CAAEjE,KAAM6C,IACjByH,EAAIwI,iBAAiBvR,EAAOJ,GACzBP,MAAK,SAAAH,GAAG,OAAIwD,EAAS,CAAEjE,KAAM8C,EAAe0J,QAAS/L,EAAI+L,aACzDC,OAAM,SAAAC,GAAG,OAAKzI,EAAS,CAAEjE,KAAM+C,QErGzBgQ,CAAiB9J,EAAM9H,KAGlC,OAAIoP,EAEA,cAAC,IAAD,CAAU5Q,GAAG,MAKf,qCACG8S,GAAe,cAAC,IAAD,CAAU9S,GAAG,oBAC3B,qBAAKf,UAAWC,KAAOiS,UAAvB,SACE,uBAAMlS,UAAWC,KAAOkS,KAAMC,SAAU,SAAC6B,GAAD,OAAWD,EAAyB3J,EAAO4J,IAAnF,UACE,2BAAUjU,UAAWC,KAAOyS,YAA5B,UACE,oBAAI1S,UAAS,qCAAgCC,KAAOW,QAApD,uIACA,cAAC,QAAD,CAAOQ,KAAK,QAAQiJ,MAAOA,EAAOsI,SAtB7B,SAAC7B,GAChBiD,EAASjD,EAAE1H,OAAOiB,QAqB8CsJ,YAAa,yDAErE,cAAC,SAAD,CAAQvS,KAAK,UAAUuG,KAAK,SAA5B,SAAuCmM,EAAe,mEAAmB,6EACzE,sBAAK9T,UAAS,UAAKC,KAAO2S,aAAZ,WAAd,UACE,mBAAG5S,UAAS,UAAKC,KAAO4S,aAAZ,qDAAZ,0GACA,cAAC,IAAD,CAAM7S,UAAS,UAAKC,KAAOe,KAAZ,gCAAgDD,GAAG,SAAlE,wD,oBClCDqT,GAA+B,WAC1C,IAAM/O,EAAW7D,IACjB,EAAqDF,GAAY,SAAA6F,GAAK,OAAIA,EAAMyK,aAAxEyC,EAAR,EAAQA,kBAAmBR,EAA3B,EAA2BA,YAAalC,EAAxC,EAAwCA,SACxC,EAAoDxM,IAAM8K,SAAS,IAAnE,oBAAO8B,EAAP,KAA2BuC,EAA3B,KACA,EAA8CnP,IAAM8K,SAAS,IAA7D,oBAAOsE,EAAP,KAAwBC,EAAxB,KACA,EAA0BrP,IAAM8K,UAAS,GAAzC,oBAAOwE,EAAP,KAAcC,EAAd,KAQA,EAA8BvP,IAAM8K,UAAS,GAA7C,oBAAO0E,EAAP,KAAgBC,EAAhB,KACMC,EAAW1P,IAAMC,OAAyB,MAmB1C0P,EAAoB,SAACpM,EAAuC9F,EAAkBL,GAClFmG,EAAI2J,iBACJhN,EHmFoC,SAACzC,EAAkBL,GACzD,OAAO,SAAU8C,GACfA,EAAS,CAAEjE,KhBlG6C,yBgBmGxDsK,EAAIqJ,eAAenS,EAAUL,GAC1BP,MAAK,SAAAH,GAAG,OAAIwD,EAAS,CAAEjE,KAAMgD,EAAsBwJ,QAAS/L,EAAI+L,aAChEC,OAAM,SAAAC,GAAG,OAAIzI,EAAS,CAAEjE,KhBnGyB,2BmBW3C2T,CAAenS,EAAUL,KAGpC,OAAKsR,EAMDlC,EAEA,cAAC,IAAD,CAAU5Q,GAAG,MAKf,qBAAKf,UAAWC,KAAOiS,UAAvB,SACE,uBAAMlS,UAAWC,KAAOkS,KAAMC,SAAU,SAAA1J,GAAG,OAAIoM,EAAkBpM,EAAKqJ,EAAoBwC,IAA1F,UACE,2BAAUvU,UAAWC,KAAOyS,YAA5B,UACE,oBAAI1S,UAAS,qCAAgCC,KAAOW,QAApD,uIACA,cAAC,QAAD,CAAOoU,UAAW,gHAAuBP,MAAOA,EAAOvP,IAAK2P,EAAUI,KAAMN,EAAU,WAAa,WAAYvT,KAAMuT,EAAU,OAAS,WAAYhC,SAjDnI,SAAC7B,GACxBwD,EAAsBxD,EAAE1H,OAAOiB,QAgDuJ6K,OA/BzK,SAACpE,GAJM,IAACzG,EAKjByG,EAAE1H,OAAOiB,OALQA,EAMLyG,EAAE1H,OAAOiB,MALzBqK,EAASrK,EAAM+D,OAAS,IAOtBsG,GAAS,GAEXE,GAAW,IAyB2LO,YAvCpL,WAClBP,GAAW,GACXQ,YAAW,kCAAMP,EAASzO,eAAf,aAAM,EAAkBiP,UAAS,IAqCoLhL,MAAO0H,EAAoBlP,KAAM,WAAY8Q,YAAY,mHACnR,cAAC,QAAD,CAAOhB,SA9CO,SAAC7B,GACrB0D,EAAmB1D,EAAE1H,OAAOiB,QA6CUA,MAAOkK,EAAiB1R,KAAM,WAAY8Q,YAAY,uHAExF,cAAC,SAAD,CAAQvS,KAAK,UAAUuG,KAAK,SAA5B,SAAuC0M,EAAoB,kFAAmB,2DAC9E,sBAAKrU,UAAS,UAAKC,KAAO2S,aAAZ,WAAd,UACE,mBAAG5S,UAAS,UAAKC,KAAO2C,SAAZ,qDAAZ,0GACA,cAAC,IAAD,CAAM5C,UAAS,UAAKC,KAAOe,KAAZ,gCAAgDD,GAAG,SAAlE,oDArBJ,cAAC,IAAD,CAAUA,GAAG,Y,oBCvCNuU,GAAiC,WAC5C,MAAkEhU,GAAY,SAAA0D,GAAK,OAAIA,EAAM4M,aAArF2D,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,UAAWC,EAA7B,EAA6BA,aAAc9D,EAA3C,EAA2CA,SAAUoB,EAArD,EAAqDA,UACrDE,QAAQC,IAAIqC,EAAUC,EAAWC,GACjCxC,QAAQC,IAAIvB,EAAUoB,GACtB,IAAM1N,EAAW7D,IAEXkU,EAAevQ,IAAMC,OAAyB,MAC9CuQ,EAAgBxQ,IAAMC,OAAyB,MAC/CwQ,EAAmBzQ,IAAMC,OAAyB,MAcxD,OACE,qBAAKpF,UAAWC,KAAO4V,YAAvB,SACE,uBAAM7V,UAAWC,KAAOkS,KAAMC,SAAU,SAACtB,GJmEV,IAACnO,EAAeC,EAAkBC,EAAcN,EInE9BuO,EAAEuB,iBAAkBhN,GJmErC1C,EInE0D6S,EJmE3C5S,EInEsD6S,EJmEpC5S,EInEkD0S,EJmEpChT,EInE6C2I,GAAU,SJoEnI,SAAU7F,GACfqG,EAAIoK,YAAYnT,EAAOC,EAAUC,EAAMN,GACpCP,MAAK,SAAAH,GAAG,OAAIwD,EAAS,CAAEjE,KAAMkD,EAAqBmP,QAAS5R,WItE5D,UACE,2BAAU7B,UAAWC,KAAO8V,SAA5B,UACE,cAAC,QAAD,CAAOZ,YAjBK,WAClBC,YAAW,kBAAMM,EAAatP,SAAWsP,EAAatP,QAAQiP,UAAS,IAgBhCnQ,IAAKwQ,EAActU,KAAM,OAAQuS,YAAa,qBAAOhB,SAAU,SAAC7B,GAAD,OAAOzL,EAAS,CAAEjE,KAAMsD,EAAa7B,KAAMiO,EAAE1H,OAAOiB,SAAU4K,KAAM,WAAY5K,MAAOkL,IACvL,cAAC,QAAD,CAAOJ,YAfM,WACnBC,YAAW,kBAAMO,EAAcvP,SAAWuP,EAAcvP,QAAQiP,UAAS,IAcjCnQ,IAAKyQ,EAAevU,KAAM,OAAQuS,YAAa,iCAAShB,SAAU,SAAA7B,GAAC,OAAIzL,EAAS,CAAEjE,KAAMuD,EAAchC,MAAOmO,EAAE1H,OAAOiB,SAAU4K,KAAM,WAAY5K,MAAOmL,IAC3L,cAAC,QAAD,CAAOL,YAbS,WACtBC,YAAW,kBAAMQ,EAAiBxP,SAAWwP,EAAiBxP,QAAQiP,UAAS,IAYpCnQ,IAAK0Q,EAAkBxU,KAAM,WAAYuS,YAAa,uCAAUhB,SAAU,SAAA7B,GAAC,OAAIzL,EAAS,CAAEjE,KAAMwD,EAAiBhC,SAAUkO,EAAE1H,OAAOiB,SAAU4K,KAAM,WAAY5K,MAAOoL,OAE9M,sBAAKzV,UAAWC,KAAO+V,gBAAvB,UACA,cAAC,SAAD,CAAS5U,KAAK,UAAUuG,KAAK,SAA7B,oEACA,cAAC,SAAD,CAAQE,QAAS,kBAAMxC,EAAS,CAACjE,KAAMqD,EAAmB9B,MAAOoQ,EAAWlQ,KAAK8O,KAAYvQ,KAAK,UAAUuG,KAAK,SAAjH,2D,oBC7BKsO,GAAiC,WAE5C,IAAM3V,EAAWC,cAEX8E,EAAW7D,IAYjB,OARA2D,IAAM0D,WAAU,WACd,IAAMqN,EAAWC,YAAY1K,GAAkB,KAC/C,OAAO,WACL2K,cAAcF,MAEhB,IAIA,sBAAKlW,UAAWC,KAAOoW,iBAAvB,UACE,sBAAKrW,UAAWC,KAAOqW,aAAvB,UACE,qBAAKtW,UAAS,UAAKC,KAAOsW,QAAZ,UAAd,SACE,qBAAIvW,UAAWC,KAAOuW,KAAtB,UACE,oBAAIxW,UAAWC,KAAOwW,YAAtB,SACE,cAAC,IAAD,CAAMzW,UAAkC,aAAtBM,EAASI,SAAT,UAAsCT,KAAOyW,gBAA7C,yCAA8FzW,KAAO0W,SAArG,+BAA4I5V,GAAG,WAAjK,0DAEF,oBAAIf,UAAWC,KAAOwW,YAAtB,SACE,cAAC,IAAD,CAAMzW,UAAiC,oBAAtBM,EAASI,SAAT,UAA6CT,KAAOyW,gBAApD,yCAAqGzW,KAAO0W,SAA5G,+BAAmJ5V,GAAG,kBAAvK,qGAEF,oBAAIf,UAAWC,KAAOwW,YAAa5O,QAAS,WAAQ,IAAM/E,EAAQoI,GAAU,gBAAiBpI,GAAS4I,EAAIkL,cAAc9T,GAAQ0I,GAAa,SAAUA,GAAa,gBAAiBnG,EAAS,CAACjE,KAAKyD,MAApM,SACE,cAAC,IAAD,CAAM7E,UAAS,UAAKC,KAAO0W,SAAZ,+BAAmD5V,GAAG,WAArE,mDAIN,mBAAGf,UAAS,UAAKC,KAAO4W,WAAZ,0DAAZ,0UAGF,cAAC,GAAD,Q,oBC7CC,SAASC,KACd,OACE,qBAAK9W,UAAW+W,KAAaC,gBAA7B,SACE,sBAAKhX,UAAW+W,KAAaE,WAA7B,UAAyC,wBAAW,6BCAnD,IAAMC,GAAqD,SAAC,GAA6C,IAA3CzW,EAA0C,EAA1CA,KAAMP,EAAoC,EAApCA,SAAUiX,EAA0B,EAA1BA,aAAcC,EAAY,EAAZA,MAGjG,OACE,cAAC,IAAD,CAAO3W,KAAMA,EAAM4W,OAAO,EAAMC,OAAQ,gBAAGhX,EAAH,EAAGA,SAAH,OAAkB8W,EAASlX,EAAa,cAAC,IAAD,CAAUa,GAAI,CAC5FL,SAAUyW,EAAcnS,MAAO,CAAEiN,KAAM3R,U,oBCHhCiX,GAAiB,WAC5B,MAAwBjW,GAAY,SAAA0D,GAAK,OAAIA,EAAMwS,iBAA3CC,EAAR,EAAQA,YACR,EAAwBnW,GAAY,SAAA0D,GAAK,OAAIA,EAAMmH,cAA3CD,EAAR,EAAQA,YACA5G,EAAOoS,cAAPpS,GAER,EAA0BH,IAAM8K,SAASwH,GAAzC,oBAAOzS,EAAP,KAAc2S,EAAd,KAqBA,OARAxS,IAAM0D,WAAU,YANhB,WACE,IAAMzC,EAAU8F,EAAYc,MAAK,SAACvH,GAA+B,OAAOA,EAAKgH,MAAQnH,KACrFc,GAAWuR,EAASvR,GAMpBwR,KAEC,IAMD,sBAAM5X,UAAS,UAAK6X,KAAsBC,iBAA3B,UAAf,UACE,qBAAKtQ,IAAKxC,EAAMyC,MAAOC,IAAK+P,EAAY5U,KAAM7C,UAAS,UAAK6X,KAAsBE,aAA3B,WACvD,mBAAG/X,UAAU,kCAAb,SAAgDgF,EAAMnC,OACtD,8BACE,qBAAI7C,UAAW6X,KAAsBG,YAArC,UACE,qBAAIhY,UAAS,+DAA0D6X,KAAsBI,oBAA7F,UACE,mBAAGjY,UAAS,UAAK6X,KAAsBK,YAA3B,SAAZ,kFACA,mBAAGlY,UAAS,UAAK6X,KAAsBK,YAA3B,kCAAZ,SAAqFlT,EAAMmT,cAE7F,qBAAInY,UAAS,+DAA0D6X,KAAsBI,oBAA7F,UACE,mBAAGjY,UAAS,UAAK6X,KAAsBK,YAA3B,SAAZ,oDACA,mBAAGlY,UAAS,UAAK6X,KAAsBK,YAA3B,kCAAZ,SAAqFlT,EAAMoT,cAE7F,qBAAIpY,UAAS,+DAA0D6X,KAAsBI,oBAA7F,UACE,mBAAGjY,UAAS,UAAK6X,KAAsBK,YAA3B,SAAZ,8CACA,mBAAGlY,UAAS,UAAK6X,KAAsBK,YAA3B,kCAAZ,SAAqFlT,EAAMqT,SAC7F,qBAAIrY,UAAS,2DAAsD6X,KAAsBI,oBAAzF,UACE,mBAAGjY,UAAS,UAAK6X,KAAsBK,YAA3B,SAAZ,sEACA,mBAAGlY,UAAS,UAAK6X,KAAsBK,YAA3B,kCAAZ,SAAqFlT,EAAMsT,4B,oBCjD1FC,GAA4E,SAACxY,GAExF,OACE,sBAAKC,UAAS,UAAK6X,KAAsBC,iBAA3B,UAAd,UACE,qBAAKtQ,IAAKzH,EAAM0H,MAAOC,IAAK3H,EAAM8C,KAAM7C,UAAS,UAAK6X,KAAsBE,aAA3B,WACjD,mBAAG/X,UAAU,kCAAb,SAAgDD,EAAM8C,OACtD,8BACE,qBAAI7C,UAAW6X,KAAsBG,YAArC,UACE,qBAAIhY,UAAS,+DAA0D6X,KAAsBI,oBAA7F,UACE,mBAAGjY,UAAS,UAAK6X,KAAsBK,YAA3B,SAAZ,kFACA,mBAAGlY,UAAS,UAAK6X,KAAsBK,YAA3B,kCAAZ,SAAqFnY,EAAMoY,cAE7F,qBAAInY,UAAS,+DAA0D6X,KAAsBI,oBAA7F,UACE,mBAAGjY,UAAS,UAAK6X,KAAsBK,YAA3B,SAAZ,oDACA,mBAAGlY,UAAS,UAAK6X,KAAsBK,YAA3B,kCAAZ,SAAqFnY,EAAMqY,cAE7F,qBAAIpY,UAAS,+DAA0D6X,KAAsBI,oBAA7F,UACE,mBAAGjY,UAAS,UAAK6X,KAAsBK,YAA3B,SAAZ,8CACA,mBAAGlY,UAAS,UAAK6X,KAAsBK,YAA3B,kCAAZ,SAAqFnY,EAAMsY,SAC7F,qBAAIrY,UAAS,2DAAsD6X,KAAsBI,oBAAzF,UACE,mBAAGjY,UAAS,UAAK6X,KAAsBK,YAA3B,SAAZ,sEACA,mBAAGlY,UAAS,UAAK6X,KAAsBK,YAA3B,kCAAZ,SAAqFnY,EAAMuY,4BC+ExFE,GA/EgB,WAC7B,IAAMzM,EAAUC,cACV1L,EAAWC,cAIX6O,EAH4B,SAAnBrD,EAAQ0M,QAGMnY,EAAS0E,OAAS1E,EAAS0E,MAAMoK,WAExD/J,EAAW7D,IACTkX,EAAgBpX,GAAY,SAAA6F,GAAK,OAAIA,EAAMgF,cAA3CuM,YACA/G,EAAarQ,GAAY,SAAA6F,GAAK,OAAIA,EAAMyK,aAAxCD,SACA8F,EAAgBnW,GAAY,SAAA0D,GAAK,OAAIA,EAAMwS,iBAA3CC,YAIFkB,EAAUzN,GAAU,gBACpB3I,EAAQ2I,GAAU,SAiBxB,OAbA/F,IAAM0D,WAAU,WACdxD,GCLK,SAAUA,GACfA,EAAS,CAAEjE,KAAMgC,IACjBsI,EAAIkN,2BACD5W,MAAK,SAAAH,GACJwD,EAAS,CACPjE,KAAMiC,EACNqD,KAAM7E,EAAI6E,UAGbmH,OAAM,SAAAC,GAASzI,EAAS,CAAEjE,KAAMkC,UDHnCqV,GAAWjN,EAAIC,aAAagN,GAAS3W,MAAK,SAAAH,GAASuI,GAAU,QAASvI,EAAI+J,YAAYC,MAAM,WAAW,IAAKzB,GAAU,eAAgBvI,EAAI8J,iBACvI3J,MAAK,WACJqD,EV0D6B,SAAC9C,EAAeoW,EAAiBzN,GACpE,OAAO,SAAU7F,GACfA,EAAS,CAAEjE,KAAMoD,IACjBkH,EAAImN,QAAQtW,GACTP,MAAK,SAAAH,GAAG,OAAIwD,EAAS,CAAEjE,KAAMqD,EAAmB9B,MAAOd,EAAI0Q,KAAK5P,MAAOE,KAAMhB,EAAI0Q,KAAK1P,UACtFgL,OAAM,SAAAC,GAAG,OAAKzI,EAAS,CAAEjE,KhBpEmB,yB0BKlC0X,CAAYvW,OAEvB,IAAM2T,EAAWC,YAAY1K,GAAkB,KAC/C,OAAO,WACL2K,cAAcF,MAEjB,IAIDwC,EACG,cAAC5B,GAAD,IAEA,qCACC,cAAC,EAAD,IAEA,uBAAM9W,UAAWC,IAAO8Y,IAAxB,UACE,eAAC,IAAD,CAAQzY,SAAU8O,GAAc9O,EAAhC,UACE,cAAC,IAAD,CAAOG,KAAK,IAAI4W,OAAO,EAAvB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO5W,KAAK,SAAS4W,OAAO,EAA5B,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO5W,KAAK,YAAY4W,OAAO,EAA/B,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO5W,KAAK,mBAAmB4W,OAAO,EAAtC,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO5W,KAAK,kBAAkB4W,OAAO,EAArC,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAAgB5W,KAAK,WAAW0W,aAAa,SAASC,MAAOzF,EAA7D,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOlR,KAAK,mBAAmB4W,OAAO,EAAtC,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,UACE,8BACE,mDAKLjI,GAAc,cAAC,IAAD,CAAO3O,KAAK,mBAAZ,SACb,cAAC,GAAD,CAAO+I,WAAY,0GAAsBC,YAAW,4BAA+BF,kBAAiB,UAAKtJ,IAAO+Y,cAAZ,sBAA+CpQ,WAAY,WAAQmD,EAAQkN,SAAU5T,EAAS,CAAEjE,KAAMuC,KAA1M,SAAsO,cAAC,GAAD,eAAuB8T,eElF1PyB,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBpX,MAAK,YAAkD,IAA/CqX,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,SCCRO,GAAwC,CAC5CxN,YAAa,GACbwM,aAAa,EACbiB,mBAAmB,GCJfC,GAA4C,CAChDC,eAAe,EACfpC,YAAa,ICGTqC,GAAiC,CACrCC,cAAc,EACdzS,oBAAoB,EACpB0S,cAAc,EACd/N,YAAa,KACbgO,WAAY,GACZ5S,sBAAsB,EACtB6S,aAAa,GCZTC,GAAmD,CACvDpV,SAAU,GACVqH,IAAK,ICSDgO,GAA+B,CACnCvG,aAAa,EACbC,cAAc,EACduG,oBAAoB,EACpBhG,mBAAmB,EACnBtB,UAAW,GACXpB,SAAU,GACVqB,YAAY,EACZsH,aAAc,GACdC,aAAa,EACbhF,SAAU,GACVC,UAAW,GACXC,aAAc,ICxBH+E,GAAcC,aAAgB,CACzCtO,WLO+B,WAAuF,IAAtFnH,EAAqF,uDAA7E0U,GAAcjB,EAA+D,uCACrH,OAAQA,EAAOrX,MACb,KAAKgC,EACH,OAAO,eACF4B,GAGP,KAAK3B,EACH,OAAO,2BACF2B,GADL,IAEEkH,YAAauM,EAAO/R,KAAKgG,KAAI,SAAAjH,GAAU,OAAO,2BAAKA,GAAZ,IAAkB6J,OAAQ,OACjEoJ,aAAa,IAEjB,KAAKpV,EACH,OAAO,2BACF0B,GADL,IAEEkH,YAAa,GACbwM,aAAa,EACbiB,mBAAmB,IAGvB,KAAKpW,EACH,OAAO,2BACFyB,GADL,IAEEkH,YAAa,aAAIlH,EAAMkH,aAAaQ,KAAI,SAAAjH,GACtC,OAAOA,EAAKgH,MAAQgM,EAAOnT,IAAoB,QAAdG,EAAKrE,KAA/B,2BAAqDqE,GAArD,IAA2D6J,OAAQ7J,EAAK6J,OAAS,IAAM7J,OAGpG,KAAKjC,EACH,OAAO,2BACFwB,GADL,IAEEkH,YAAa,aAAIlH,EAAMkH,aAAaQ,KAAI,SAAAjH,GACtC,OAAOA,EAAKgH,MAAQgM,EAAOnT,GAApB,2BAA8BG,GAA9B,IAAoC6J,OAAQ7J,EAAK6J,OAAS,IAAM7J,OAG7E,KAAKhC,EACH,OAAO,2BACFuB,GADL,IAEEkH,YAAa,aAAIlH,EAAMkH,aAAaQ,KAAI,SAAAjH,GACtC,OAAO,2BAAKA,GAAZ,IAAkB6J,OAAQ,SAGhC,QACE,OAAOtK,IKjDXwS,cJK+B,WAAoF,IAAnFxS,EAAkF,uDAA1E4U,GAA2BnB,EAA+C,uCAClH,OAAQA,EAAOrX,MACb,KAAKsC,EACH,OAAO,2BACFsB,GADL,IAEE6U,eAAe,EACfpC,YAAagB,EAAOhT,KAAK,KAE7B,KAAK9B,EACH,OAAO,2BACFqB,GADL,IAEE6U,eAAe,EACfpC,YAAa,KAEjB,QACE,OAAOzS,IInBXoC,aHe0B,WAA2E,IAA1EpC,EAAyE,uDAAjE8U,GAAmBrB,EAA8C,uCACpG,OAAQA,EAAOrX,MACb,KAAKwC,EACH,OAAO,2BACFoB,GADL,IAEEqC,sBAAsB,IAG1B,KAAKrD,EACH,OAAO,2BACFgB,GADL,IAEEqC,sBAAsB,EACtBC,oBAAoB,EACpB2E,YAAa,KACbgO,WAAY,GACZC,aAAa,IAEjB,KAAKrW,EACH,OAAO,2BACFmB,GADL,IAEE+U,cAAc,IAElB,KAAKjW,EACH,OAAO,2BACFkB,GADL,IAEE+U,cAAc,EACd9N,YAAawM,EAAO/R,KACpBuT,WAAYxB,EAAO/K,UACnBpG,mBAAoBmR,EAAO9K,SAG/B,KAAK5J,EACH,OAAO,2BACFiB,GADL,IAEEgV,cAAc,EACd/N,YAAa,OAEjB,QACE,OAAOjH,IGpDXC,iBFEgC,WAAkG,IAAjGD,EAAgG,uDAAxFmV,GAAyB1B,EAA+D,uCACjI,OAAQA,EAAOrX,MACb,KAAK4B,EACH,OAAO,2BACFgC,GADL,IAEEoH,IAAKqM,EAAO1L,QAAP,2BAAsB0L,EAAO1L,SAA7B,IAAsCuC,OAAQ,IAAMtK,EAAMoH,MAEnE,KAAKrJ,EACH,OAAO,2BACFiC,GADL,IAEED,SAAS,GAAD,oBAAMC,EAAMD,UAAZ,aAAyB0T,EAAO/R,SAE5C,KAAKzD,EACH,OAAO,2BACF+B,GADL,IAEED,SAAU,aAAIC,EAAMD,UAAUyH,QAAO,SAAA/G,GAAU,OAAOA,EAAKkH,MAAQ8L,EAAOnT,QAG9E,KAAKpC,EACH,OAAO,2BACF8B,GADL,IAEED,SAAU0T,EAAO/R,OAErB,KAAKvD,EACH,OAAO,2BACF6B,GADL,IAEED,SAAU,GACVqH,IAAK,KAET,QACE,OAAOpH,IE/BX4M,UDuB6B,WAA4D,IAA3D5M,EAA0D,uDAAlDoV,GAAkB3B,EAAgC,uCACxF,OAAQA,EAAOrX,MACb,KAAKwD,EACH,OAAO,2BACFI,GADL,IAEEyQ,aAAcgD,EAAO7V,WAEzB,KAAK+B,EACH,OAAO,2BACFK,GADL,IAEEwQ,UAAWiD,EAAO9V,QAEtB,KAAK+B,EACH,OAAO,2BACFM,GADL,IAEEuQ,SAAUkD,EAAO5V,OAErB,KAAKgC,GACH,MAAO,CACLkO,UAAW,GACXpB,SAAU,GACV2I,aAAc,IAElB,KAAK9V,EACH,OAAO,eACFQ,GAEP,KAAKP,EACH,OAAO,2BACFO,GADL,IAEE2M,SAAU8G,EAAO5V,KACjB0S,SAAUkD,EAAO5V,KACjB2S,UAAWiD,EAAO9V,MAClBoQ,UAAW0F,EAAO9V,QAEtB,KAAK4B,EACH,OAAO,2BACFS,GADL,IAEE2M,SAAU8G,EAAO5V,KACjBkQ,UAAW0F,EAAO9V,MAClB4X,YAAa9B,EAAOjG,OACpB+C,SAAUkD,EAAO5V,KACjB2S,UAAWiD,EAAO9V,QAEtB,KAAK0B,EACH,OAAO,2BACFW,GADL,IAEEgO,YAAY,IAEhB,KAAK1O,EACH,OAAO,2BACFU,GADL,IAEEgO,YAAY,EACZrB,SAAU8G,EAAOhF,QAAQlB,KAAK1P,KAC9BkQ,UAAW0F,EAAOhF,QAAQlB,KAAK5P,QAGnC,KAAKsB,EACH,OAAO,2BACFe,GADL,IAEE8O,cAAc,IAElB,KAAK5P,EACH,MAAO,CACL2P,YAAa4E,EAAO7K,QACpBkG,cAAc,GAElB,KAAK3P,EACH,OAAO,2BACFa,GADL,IAEEqV,oBAAoB,IAExB,KAAKjW,EACH,OAAO,2BACFY,GADL,IAEEqP,mBAAmB,IAEvB,QACE,OAAOrP,M,UE/FP0V,IAJc,kBAAXC,SAAwBA,QAAWA,QAAgBC,sCACrDD,QAAWA,QAAgBC,qCAAqC,IACjEC,MAE4BC,aAAgBC,OACrC/V,GAAQgW,aAAYR,GAAaE,IAE9C1R,IAASsO,OAEP,cAAC,IAAM2D,WAAP,UACE,cAAC,IAAD,CAAU9T,MAAOnC,GAAjB,SACE,cAAC,IAAD,UACA,cAAC,GAAD,UAMJuD,SAASC,eAAe,SAQ1B0Q,M,mBCxCAtZ,EAAOC,QAAU,CAAC,KAAO,yBAAyB,YAAc,gCAAgC,UAAY,8BAA8B,OAAS,2BAA2B,KAAO,yBAAyB,aAAe,iCAAiC,SAAW,6BAA6B,aAAe,mC,mBCArTD,EAAOC,QAAU,CAAC,KAAO,2BAA2B,YAAc,kCAAkC,UAAY,gCAAgC,OAAS,6BAA6B,KAAO,2BAA2B,aAAe,mCAAmC,SAAW,+BAA+B,aAAe,qC,mBCAnUD,EAAOC,QAAU,CAAC,UAAY,4BAA4B,KAAO,uBAAuB,YAAc,8BAA8B,OAAS,yBAAyB,KAAO,uBAAuB,aAAe,+BAA+B,SAAW,2BAA2B,aAAe,iC,mBCAvSD,EAAOC,QAAU,CAAC,UAAY,yBAAyB,KAAO,oBAAoB,YAAc,2BAA2B,OAAS,sBAAsB,KAAO,oBAAoB,aAAe,4BAA4B,SAAW,wBAAwB,aAAe,8B,mBCAlRD,EAAOC,QAAU,CAAC,6BAA+B,yDAAyD,iCAAmC,6DAA6D,4BAA8B,wDAAwD,sCAAwC,kEAAkE,wBAA0B,oDAAoD,+BAAiC,6D,mBCAzfD,EAAOC,QAAU,CAAC,iBAAmB,qCAAqC,kBAAoB,sCAAsC,iBAAmB,qCAAqC,iBAAmB,qCAAqC,KAAO,2B,mBCA3PD,EAAOC,QAAU,CAAC,YAAc,kCAAkC,KAAO,2BAA2B,SAAW,+BAA+B,gBAAkB,wC,mBCAhKD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,MAAQ,qBAAqB,iBAAmB,kC,mBCA/FD,EAAOC,QAAU,CAAC,aAAe,yCAAyC,oBAAsB,gDAAgD,YAAc,wCAAwC,cAAgB,4C,mBCAtND,EAAOC,QAAU,CAAC,IAAM,iBAAiB,cAAgB,6B,mBCAzDD,EAAOC,QAAU,CAAC,yBAA2B,mDAAmD,8BAAgC,0D,mBCAhID,EAAOC,QAAU,CAAC,gBAAkB,mCAAmC,WAAa,8BAA8B,aAAa,gC","file":"static/js/main.4b47eabe.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor\":\"burger-page_constructor__1imr1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__br2gS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order__conteiner\":\"order-details_order__conteiner__3CKvA\",\"order__closebutton\":\"order-details_order__closebutton__1zwZ_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"column\":\"ingredient-type_column__2kwLX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__3KCCX\",\"link\":\"app-header_link__2_L8G\",\"navlink\":\"app-header_navlink__2Pikr\",\"activenavlink\":\"app-header_activenavlink__2VWoS\",\"header__navigation\":\"app-header_header__navigation__1co0x\",\"header__list\":\"app-header_header__list__vkHPm\",\"header__logo\":\"app-header_header__logo__3RF0J\",\"header__item\":\"app-header_header__item__g_N9q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal__conteiner\":\"ingredient-page_modal__conteiner__-gO38\",\"modal__image\":\"ingredient-page_modal__image__2N69N\",\"modal__list\":\"ingredient-page_modal__list__1AiSW\",\"modal__listelement\":\"ingredient-page_modal__listelement__1JskB\",\"modal__text\":\"ingredient-page_modal__text__3srbM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal__conteiner\":\"ingredient-details_modal__conteiner__3BjfA\",\"modal__image\":\"ingredient-details_modal__image__y3ADF\",\"modal__list\":\"ingredient-details_modal__list__3W5Ct\",\"modal__listelement\":\"ingredient-details_modal__listelement__CqxKt\",\"modal__text\":\"ingredient-details_modal__text__WkOiW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileconteiner\":\"profile_profileconteiner__2Ddau\",\"navmenu\":\"profile_navmenu__3CXbF\",\"list\":\"profile_list__1a5Rk\",\"listelement\":\"profile_listelement__CbYLh\",\"currentlinktext\":\"profile_currentlinktext__KT-yV\",\"linktext\":\"profile_linktext__3jM8K\",\"navconteiner\":\"profile_navconteiner__3t19W\",\"blockquote\":\"profile_blockquote__3quvN\"};","import React from \"react\";\n\nimport { IMenuItem } from \"../../utils/interfaces\";\n\nexport  function MenuItem(props: IMenuItem) {\n\n  return (\n    <li className={props.styles}>\n      {props.children}\n      {props.text && <p  className={props.textStyles} >{props.text}</p>}\n    </li>\n  )\n}\n\n","import React from \"react\";\nimport { Logo } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport headerStyles from './app-header.module.css';\nimport { BurgerIcon, ListIcon, ProfileIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { MenuItem } from \"../menu-item/menu-item\";\nimport { FunctionComponent } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom\";\nimport { ILocation } from \"../../utils/interfaces\";\n\nexport const AppHeader: FunctionComponent = () => {\n  const location = useLocation<ILocation>();\n\n\n  const isActivePage = (path: string) => {\n    return location.pathname === path\n  }\n\n  return (\n    <header className={headerStyles.header}>\n      <nav className={headerStyles.header__navigation}>\n        <ul className={headerStyles.header__list}>\n          <Link to='/' className={headerStyles.link} >\n            <MenuItem text='Конструктор' textStyles={isActivePage('/') ? `${headerStyles.activenavlink} text text_type_main-default ml-2` : `text text_type_main-default ml-2 ${headerStyles.navlink}`} styles={`${headerStyles.header__item} pl-5 pr-5`}>\n              <BurgerIcon type={isActivePage('/') ? 'primary' : 'secondary'} />\n            </MenuItem>\n          </Link>\n          <Link to='' className={headerStyles.link}>\n            <MenuItem text='Лента заказов' textStyles={isActivePage('') ? `${headerStyles.activenavlink} text text_type_main-default ml-2` : `text text_type_main-default ml-2 ${headerStyles.navlink}`} styles={`${headerStyles.header__item} pl-5 pr-5`} >\n              <ListIcon type={isActivePage('') ? 'primary' : 'secondary'} />\n            </MenuItem>\n          </Link>\n          <MenuItem styles={headerStyles.header__logo}>\n            <Logo />\n          </MenuItem>\n          <Link to='/profile' className={headerStyles.link} >\n            <MenuItem text='Личный кабинет' textStyles={isActivePage('/profile') ? `${headerStyles.activenavlink} text text_type_main-default ml-2` : `text text_type_main-default ml-2 ${headerStyles.navlink}`} styles={`${headerStyles.header__item} pl-5 pr-5`} >\n              <ProfileIcon type={isActivePage('/profile') ? 'primary' : 'secondary'} />\n            </MenuItem>\n          </Link>\n        </ul>\n      </nav>\n    </header>\n\n  )\n}\n\n\n\n\n\n","import { TypedUseSelectorHook, useSelector as selectorHook, useDispatch as dispatchHook } from \"react-redux\";\nimport { TRootState } from \".\";\nimport { TAppDispatch, AppThunk } from \".\";\n\nexport const useSelector: TypedUseSelectorHook<TRootState> = selectorHook;\n\nexport const useDispatch = () => dispatchHook<AppThunk | TAppDispatch>();\n","import { getCookie } from \"./utils\";\n\n\nconst BASEURL = 'https://norma.nomoreparties.space/api/';\n\ntype baseUrl = { url: string };\n\n\nclass Api {\n  private url: string;\n  private headers: { [name: string]: string };\n  constructor({ url }: baseUrl) {\n    this.url = url;\n    this.headers = {\n      'Content-Type': 'application/json',\n    }\n  }\n\n  private checkResponse(res: Response) {\n\n    if (res.ok) { return res.json() } res.json().then(res => Promise.reject(res))\n\n  }\n\n\n  getBurgerIngredientsData() {\n    return fetch(`${this.url}ingredients`, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' }\n    }).then(this.checkResponse)\n  }\n\n  getOrderNumber(arrayOfId: Array<string>, token: string) {\n    return fetch(`${this.url}orders`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({ \"ingredients\": arrayOfId })\n    }).then(this.checkResponse);\n  }\n\n  setPasswordReset(email: string, token: string) {\n    return fetch(`${this.url}password-reset`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({ \"email\": email })\n    }).then(this.checkResponse);\n  }\n\n  setNewPassword(password: string, token: string) {\n    return fetch(`${this.url}password-reset/reset`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        \"password\": password,\n        \"token\": token\n      })\n    }).then(this.checkResponse);\n  }\n\n  createNewUser(email: string, password: string, name: string, token: string) {\n    return fetch(`${this.url}auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        \"email\": email,\n        \"password\": password,\n        \"name\": name\n      })\n    }).then(this.checkResponse);\n  }\n\n  loginRequest(email: string, password: string, token: string) {\n    return fetch(`${this.url}auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        \"email\": email,\n        \"password\": password,\n      })\n    }).then(this.checkResponse);\n  }\n\n  refreshToken(token: string) {\n    return fetch(`${this.url}auth/token`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ \"token\": token })\n    }).then(this.checkResponse);\n  }\n\n  logoutRequest(match: string) {\n    return fetch(`${this.url}auth/logout`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + match\n      },\n      body: JSON.stringify({ \"token\": match })\n    }).then(this.checkResponse);\n  }\n\n  getUser(token: string) {\n    return fetch(`${this.url}auth/user`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n    }).then(this.checkResponse)\n  }\n\n  refreshUser(email: string, password: string, name: string, token: string) {\n    return fetch(`${this.url}auth/user`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        \"email\": email,\n        \"password\": password,\n        \"name\": name\n      })\n    }).then(this.checkResponse);\n\n\n  }\n\n}\n\nexport default new Api({\n  url: BASEURL\n})\n\n\n","export const ADD_ITEM: 'ADD_ITEM' = 'ADD_ITEM';\nexport const ADD_BUN: 'ADD_BUN' = 'ADD_BUN';\nexport const DELETE_INGREDIENT: 'DELETE_INGREDIENT' = 'DELETE_INGREDIENT';\nexport const REORDER_INGREDIENTS: 'REORDER_INGREDIENTS' = 'REORDER_INGREDIENTS';\nexport const CLEAN_STATE: 'CLEAN_STATE' = 'CLEAN_STATE';\n\n\nexport const BURGER_DATA_REQUEST: 'BURGER_DATA_REQUEST' = 'BURGER_DATA_REQUEST';\nexport const BURGER_DATA_SUCCESS: 'BURGER_DATA_SUCCESS' = 'BURGER_DATA_SUCCESS';\nexport const BURGER_DATA_ERROR: 'BURGER_DATA_ERROR' = 'BURGER_DATA_ERROR';\nexport const ADD_AMMOUNT: 'ADD_AMOUNT' = 'ADD_AMOUNT';\nexport const DECREASE_AMOUNT: 'DECREASE_AMOUNT' = 'DECREASE_AMOUNT';\nexport const CLEAN_INGREDIENTS_AMOUNTS: 'CLEAN_INGREDIENTS_AMOUNTS' = 'CLEAN_INGREDIENTS_AMOUNTS';\n\n\nexport const CLICK_ON_INGREDIENT: 'CLICK_ON_INGREDIENT' = 'CLICK_ON_INGREDIENT';\nexport const CLICK_ON_CLOSE_BUTTON: 'CLICK_ON_CLOSE_BUTTON' = 'CLICK_ON_CLOSE_BUTTON';\n\n\nexport const OPEN_ORDER_POPUP: 'OPEN_ORDER_POPUP' = 'OPEN_ORDER_POPUP';\nexport const GET_ORDER_REQUEST: 'GET_ORDER_REQUEST' = 'GET_ORDER_REQUEST';\nexport const GET_ORDER_SUCCESS: 'GET_ORDER_SUCCESS' = 'GET_ORDER_SUCCESS';\nexport const GET_ORDER_ERROR: 'GET_ORDER_ERROR' = 'GET_ORDER_ERROR';\nexport const CLOSE_ORDER_POPUP: 'CLOSE_ORDER_POPUP' = 'CLOSE_ORDER_POPUP';\n\nexport const RESET_REQUEST: 'RESET_REQUEST' = 'RESET_REQUEST';\nexport const RESET_SUCCESS: 'RESET_SUCCESS' = 'RESET_SUCCESS';\nexport const RESET_ERROR: 'RESET_ERROR' = 'RESET_ERROR';\n\n\nexport const SET_PASSWORD_REQUEST: 'SET_PASSWORD_REQUEST' = 'SET_PASSWORD_REQUEST';\nexport const SET_PASSWORD_SUCCESS: 'SET_PASSWORD_SUCCESS' = 'SET_PASSWORD_SUCCESS';\nexport const SET_PASSWORD_ERROR: 'SET_PASSWORD_ERROR' = 'SET_PASSWORD_ERROR';\n\nexport const CREATE_USER_REQUEST: 'CREATE_USER_REQUEST' = 'CREATE_USER_REQUEST';\nexport const CREATE_USER_SUCCESS: 'CREATE_USER_SUCCESS' = 'CREATE_USER_SUCCESS';\nexport const CREATE_USER_ERROR: 'CREATE_USER_ERROR' = 'CREATE_USER_ERROR';\n\nexport const LOGIN_REQUEST: 'lOGIN_REQUEST' = 'lOGIN_REQUEST';\nexport const LOGIN_SUCCESS: 'LOGIN_SUCCESS' = 'LOGIN_SUCCESS';\nexport const LOGIN_ERROR: 'LOGIN_ERROR' = 'LOGIN_ERROR';\n\nexport const USER_DATA_REQUEST: ' USER_DATA_REQUEST' = ' USER_DATA_REQUEST';\nexport const USER_DATA_SUCCESS: 'USER_DARA_SUCCESS' = 'USER_DARA_SUCCESS';\nexport const USER_DATA_ERROR: ' USER_DATA_ERROR' = ' USER_DATA_ERROR';\n\nexport const CHANGE_NAME: 'CHANGE_NAME' = 'CHANGE_NAME';\nexport const CHANGE_EMAIL: 'CHANGE_EMAIL' = 'CHANGE_EMAIL';\nexport const CHANGE_PASSWORD: 'CHANGE_PASSWORD' = 'CHANGE_PASSWORD';\n\n\nexport const USER_LOGOUT: 'USER_LOGOUT' = 'USER_LOGOUT';\n","import React, { FunctionComponent } from 'react';\nimport { DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport itemStyles from './constructor-item.module.css';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { REORDER_INGREDIENTS } from '../../services/constants/index'\nimport { useDispatch, useSelector } from '../../services/types/hooks';\nimport { IConstructorItem } from '../../utils/interfaces';\n\nexport const ConstructorItem: FunctionComponent<IConstructorItem> = (props) => {\n  const { elements } = useSelector(state => state.constructorState);\n  const ref = React.useRef<HTMLLIElement>(null);\n  const dispatch = useDispatch();\n  const { id, index } = props;\n\n  ///заменяем массив с новым порядком в стейте\n  function moveCard(dragIndex: number, hoverIndex: number) {\n    let newCards = [...elements];\n    let dragCard = newCards[dragIndex];\n    newCards.splice(dragIndex, 1);\n    newCards.splice(hoverIndex, 0, dragCard);\n    dispatch({ type: REORDER_INGREDIENTS, data: newCards });\n  }\n\n\n  const [{ opacity }, drag] = useDrag({\n    type: 'element',\n    item: { id, index },\n    collect: monitor => ({\n      opacity: monitor.isDragging() ? 0.5 : 1\n    })\n  })\n\n  const [{ isHover }, drop] = useDrop({\n    accept: 'element',\n    collect: monitor => ({ isHover: monitor.isOver() }),\n    hover(item: { id: number, index: number }) {\n      if (item.index === index) {\n        return;\n      }\n      if (!ref.current) {\n        return;\n      }\n      moveCard(item.index, index);\n      item.index = index\n    }\n  })\n\n  const itemStyle = isHover ? itemStyles.constructoritem__hoverelement : itemStyles.constructoritem__element\n\n\n  drag(drop(ref))\n\n  return (\n    <li ref={ref} className={`mt-4 ${itemStyle}`} style={{ opacity }}>\n      <DragIcon type='primary' />\n      {props.children}\n    </li>\n  )\n}\n\n","export default __webpack_public_path__ + \"static/media/Subtract.c76f6647.svg\";","import React, { FunctionComponent } from \"react\";\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\"\nimport image from '../../images/Subtract.svg';\nimport { useSelector } from \"../../services/types/hooks\";\nimport { IOrderRegistration } from \"../../utils/interfaces\";\n\nexport const OrderRegistration: FunctionComponent<IOrderRegistration> = (props) => {\n  const { orderButtonIsClicked, requestIsSuccessed } = useSelector(store => store.currentOrder)\n\n  return (\n    <div className={props.styles}>\n      <p className='text text_type_digits-medium mr-2'>{props.cost}</p>\n      <img src={image} alt='icon' />\n      <div className='ml-10'>\n        <Button type=\"primary\" size=\"large\" disabled={orderButtonIsClicked && requestIsSuccessed} onClick={() => props.clickHandler()}>Оформить заказ</Button>\n      </div>\n    </div>\n\n  )\n}\n\n","import overlayStyles from './modal-overlay.module.css';\nimport React from 'react';\nimport { IModalOverlay } from '../../utils/interfaces';\n\nexport const ModalOverlay = React.forwardRef<HTMLDivElement, IModalOverlay>((props, ref) => {\n\n  return (\n    <div ref={ref} className={overlayStyles.overlay} onClick={props.closeFunction}>\n    </div>\n  )\n})\n\n\n","import ReactDOM from \"react-dom\";\nimport React, { FunctionComponent } from \"react\";\nimport popupStyles from './modal.module.css';\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { ModalOverlay } from '../modal-overlay/modal-overlay';\nimport { useEffect } from \"react\";\n\nimport { IModal } from \"../../utils/interfaces\";\n\nexport const Modal:FunctionComponent<IModal> = (props) => {\n\n  const modalRef = React.useRef<HTMLDivElement>(null);\n  const modalRoot = document.getElementById('modal-root');\n\n  ///закрытие попапа по нажатию на Esc\n  function closeByEsc(evt: KeyboardEvent) {\n    evt.key === 'Escape' && props.closeModal()\n  }\n  ///закрытие попапа по нажатию на оверлей\n  function closeByClickOverlay(evt: React.MouseEvent<HTMLDivElement>) {\n\n    evt.target === modalRef.current && props.closeModal()\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', closeByEsc)\n\n    return () => {\n      document.removeEventListener('keydown', closeByEsc)\n\n    }\n  }, [])\n\n  return ReactDOM.createPortal(\n    (<div className={popupStyles.popup} >\n      <ModalOverlay ref={modalRef} closeFunction={(evt: React.MouseEvent<HTMLDivElement>) => { closeByClickOverlay(evt) }} />\n      <div className={popupStyles.modal} >\n        <div className={props.modalHeaderStyles} >\n          {props.headerText && <h2 className={props.modalStyles} >{props.headerText}</h2>}\n          <div className={popupStyles.popup__closeicon}><CloseIcon type='primary' onClick={props.closeModal} /></div>\n        </div>\n        {props.children}\n      </div>\n    </div>\n    ), modalRoot!)\n}\n\n","export default __webpack_public_path__ + \"static/media/done.fd977731.svg\";","import orderDetailsStyles from './order-details.module.css';\nimport orderDoneImage from '../../images/done.svg';\nimport { FunctionComponent } from 'react';\nimport { IOrderDetails } from '../../utils/interfaces';\n\nexport const OrderDetails: FunctionComponent<IOrderDetails> = (props) => {\n\n  return (\n    <div className={`${orderDetailsStyles.order__conteiner} mt-30 mb-30`}>\n      <h3 className='mb-8 text text_type_digits-large'>{props.number}</h3>\n      <span className='text text_type_main-medium mb-15'>идентификатор заказа</span>\n      <img src={orderDoneImage} alt='готово' />\n      <p className='text text_type_main-default mt-15'>Ваш заказ начали готовить</p>\n      <span className='text text_type_main-default text_color_inactive mt-2'>Дождитесь готовности на орбитальной станции</span>\n    </div>\n\n  )\n}\n\n\n","import { TIngredient } from \"../services/types/data\"\nimport Api from \"./Api\"\n\nexport const uid = (): number => { return Date.now() * Math.random() }\n\nexport const calculateCost = (elements: Array<TIngredient>, bunPrice: number = 0): number => {\n  return (2 * bunPrice) + elements.reduce((res, item) => {\n    return res + item.price\n  }, 0)\n}\n\nexport function setCookie(name: string, value: string, props?: { [key in any]: any } | { [key in any]: never }) {\n  props = props || {};\n  let exp = props.expires;\n  if (typeof exp == 'number' && exp) {\n    const d = new Date();\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = d;\n  }\n  if (exp && exp.toUTCString) {\n    props.expires = exp.toUTCString();\n  }\n  value = encodeURIComponent(value);\n  let updatedCookie = name + '=' + value;\n  for (const propName in props) {\n    updatedCookie += '; ' + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += '=' + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n}\n\nexport function getCookie(name: string) {\n  const matches = document.cookie.match(\n    new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\n\n  );\n\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport function deleteCookie (name: string) {\n  setCookie(name, \"\", {\n    'max-age': -1\n  })\n}\n\n\nexport  function refreshMainToken() {\n\n  const match = getCookie('refreshToken');\n  match !== undefined &&  Api.refreshToken(match).then(res => { setCookie('token', res.accessToken.split('Bearer ')[1]); setCookie('refreshToken', res.refreshToken) })\n}\n\n\n\n","import consructorStyles from './burger-constructor.module.css';\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { ConstructorItem } from '../constructor-item/constructor-item';\nimport { OrderRegistration } from '../order-registration/order-registration';\nimport { useDrop } from 'react-dnd';\nimport { ADD_ITEM, ADD_BUN, DELETE_INGREDIENT, CLEAN_STATE } from '../../services/constants/index';\nimport { ADD_AMMOUNT, DECREASE_AMOUNT, CLEAN_INGREDIENTS_AMOUNTS } from '../../services/constants/index';\nimport { Modal } from '../modal/modal';\nimport React, { FunctionComponent } from 'react';\nimport { OrderDetails } from '../order-details/order-details';\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport { OPEN_ORDER_POPUP, CLOSE_ORDER_POPUP } from '../../services/constants/index';\nimport { getOrderNumber } from '../../services/actions/order-details';\nimport { calculateCost } from '../../utils/utils';\nimport { getCookie, setCookie, refreshMainToken } from '../../utils/utils';\nimport Api from '../../utils/Api';\nimport { Redirect, useHistory } from 'react-router-dom';\n\n\nexport const BurgerConstructor: FunctionComponent = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { orderButtonIsClicked, requestIsSuccessed, orderNumber } = useSelector(state => state.currentOrder);\n  const { ingredients } = useSelector(state => state.burgerData);\n  const { elements, bun } = useSelector(state => state.constructorState);\n\n\n\n  const token = getCookie('token')\n\n  ///вычисляем значения для ключей\n  function uid(): number {\n    return Date.now() * Math.random()\n  }\n\n  const [{ isDrag }, dropTarget] = useDrop({\n    accept: 'item',\n    collect: monitor => ({\n      isDrag: monitor.canDrop()\n    }),\n    drop(itemId: { id: string }) {\n      dispatch({\n        type: ADD_ITEM, data: ingredients.filter(item => {\n          return item._id === itemId.id && item.type !== 'bun'\n        }).map((item) => { return { ...item, uid: uid() } })\n      })\n      dispatch({\n        type: ADD_BUN, bunItem: ingredients.find(item => {\n          return item._id === itemId.id && item.type === 'bun'\n        })\n      })\n      dispatch({ type: ADD_AMMOUNT, id: itemId.id })\n    }\n  });\n\n  ///удаляем ингредиент из конструктора и меняем значение счетчика\n  const itemRemove = React.useCallback((itemKey: number, itemId: string) => {\n    dispatch({ type: DELETE_INGREDIENT, id: itemKey });\n    dispatch({ type: DECREASE_AMOUNT, id: itemId });\n  }, [dispatch])\n\n  ///логика открытия попапа с номером заказа\n  const orderDetailsRequestSending = () => {\n\n      const match = getCookie('refreshToken');\n      match && Api.refreshToken(match).then(res => { setCookie('token', res.accessToken.split('Bearer ')[1]); setCookie('refreshToken', res.refreshToken) })\n        .then(() => {\n          const idArray = elements.map(item => { return item._id })\n          dispatch({ type: OPEN_ORDER_POPUP });\n          dispatch(getOrderNumber([...idArray, bun._id], token));\n        })\n\n    }\n\n\n\n\n\n  ///логика закрытия попапа\n  const orderPopupClose = React.useCallback(() => {\n    dispatch({ type: CLOSE_ORDER_POPUP });\n    dispatch({ type: CLEAN_STATE });\n    dispatch({ type: CLEAN_INGREDIENTS_AMOUNTS })\n  }, [dispatch])\n\n  const style = isDrag ? consructorStyles.burgerconstructor__dropconteiner : consructorStyles.burgerconstructor__conteiner\n  const cartStyle = elements.length >= 6 ? consructorStyles.burgerconstructor__elementswithscroll : consructorStyles.burgerconstructor__elements\n\n\n\n  return (\n    elements && <div ref={dropTarget} className={`pl-4   ml-10 pt-25 ${style}`}>\n      {bun && bun._id && Array.of(bun).map((item, index) => (\n        <ConstructorElement key={index} type=\"top\" isLocked={true} text={`${item.name} (верх)`} price={item.price} thumbnail={item.image_mobile} />\n      ))\n      }\n      <ul className={`pr-4 mr-4 ${cartStyle}`}>\n        {elements.filter(item => { return item.type !== 'bun' }).map((item, index) => (\n          <ConstructorItem id={item.uid} index={index} key={item.uid}>\n            <ConstructorElement text={item.name} thumbnail={item.image_mobile} price={item.price} handleClose={() => itemRemove(item.uid, item._id)} />\n          </ConstructorItem>))}\n      </ul>\n      {bun && bun._id && Array.of(bun).map((item, index) => (\n        <ConstructorElement key={index} type=\"bottom\" isLocked={true} text={`${item.name} (низ)`} price={item.price} thumbnail={item.image_mobile} />))}\n      <OrderRegistration clickHandler={() => {\n        getCookie('refreshToken') === undefined ? history.replace({ pathname: '/login' }) : orderDetailsRequestSending()\n      }} styles={`mt-10 ${consructorStyles.burgerconstructor__cost}`} cost={calculateCost(elements, bun.price)} />\n      {orderButtonIsClicked && requestIsSuccessed && <Modal closeModal={orderPopupClose} modalHeaderStyles={consructorStyles.burgerconstructor__modalheader}><OrderDetails number={orderNumber} /></Modal>}\n    </div >\n\n\n  )\n}\n\n\n","import Api from \"../../utils/Api\";\nimport { OPEN_ORDER_POPUP, GET_ORDER_REQUEST, GET_ORDER_SUCCESS, GET_ORDER_ERROR, CLOSE_ORDER_POPUP } from \"../constants\";\nimport { TOrder } from \"../types/data\";\nimport { AppThunk, TAppDispatch } from \"../types\";\n\nexport interface IOpenOrderPopupAction {\n  readonly type: typeof OPEN_ORDER_POPUP;\n}\n\nexport interface IGetOrderRequestAction {\n  readonly type: typeof GET_ORDER_REQUEST;\n}\n\nexport interface IGetOrderSuccessAction {\n  readonly type: typeof GET_ORDER_SUCCESS;\n  readonly data: number;\n  readonly orderData: TOrder;\n  readonly result: boolean;\n}\n\nexport interface IGetOrderErrorAction {\n  readonly type: typeof GET_ORDER_ERROR;\n}\n\nexport interface ICloseOrderPopupAction {\n  readonly type: typeof CLOSE_ORDER_POPUP;\n}\n\n\nexport type TOrderDetailsActions = IOpenOrderPopupAction | IGetOrderRequestAction | IGetOrderSuccessAction | IGetOrderErrorAction | ICloseOrderPopupAction;\n\n\n\n\n\n\nexport const getOrderNumber: AppThunk = (idData: string[],token: string) => {\n  return function (dispatch: TAppDispatch) {\n    dispatch({ type: GET_ORDER_REQUEST })\n    Api.getOrderNumber(idData,  token)\n      .then(res => {\n        dispatch({ type: GET_ORDER_SUCCESS, data: res.order.number, orderData: res, result: res.success })\n      })\n      .catch(err => { dispatch({ type: GET_ORDER_ERROR }) })\n\n  }\n}\n","import React, { FunctionComponent } from \"react\";\nimport cardStyles from './ingredient.module.css';\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { Counter } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { IIngredient } from \"../../utils/interfaces\";\nimport { useDispatch, useSelector } from '../../services/types/hooks';\nimport { CLICK_ON_INGREDIENT } from \"../../services/constants/index\";\nimport { useDrag } from \"react-dnd\";\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\n\nconst Ingredient: FunctionComponent<IIngredient> = (props) => {\n  const { id, elements, bun } = props\n  const { ingredients } = useSelector(state => state.burgerData)\n\n\n  const dispatch = useDispatch();\n  const location = useLocation();\n\n  const [, dragRef] = useDrag({\n    type: 'item',\n    item: { id }\n  })\n  ////находим ингредиент который выбрали\n  function selectIngredient(evt: React.MouseEvent, data: typeof ingredients) {\n    return data.filter(item => {\n      return item._id === evt.currentTarget.id\n    })\n\n  }\n\n  return (\n    <Link className={cardStyles.link} to={{\n      pathname: `/ingredients/${props.id}`,\n      state: { background: location }\n    }} >\n      <li ref={dragRef} id={props.id} className={cardStyles.ingredient__item} onClick={(evt) => { dispatch({ type: CLICK_ON_INGREDIENT, item: selectIngredient(evt, ingredients) }) }}   >\n        {!!props.amount && !!elements.length && <Counter count={props.amount} size=\"default\" />}\n        {!!bun.amount && props.type === 'bun' && bun._id === id && !!bun && <Counter count={bun.amount} size=\"default\" />}\n        <img className={`mb-1 pl-4 pr-4  ${cardStyles.ingredient__image}`} src={props.image} alt={props.name} />\n        <div className={`mb-1 ${cardStyles.ingredient__info}`} >\n          <p className='mr-1 text text_type_digits-default'>{props.price}</p>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n        <p className={`mt-1 text text_type_main-default ${cardStyles.ingredient__text}`}>{props.name}</p>\n      </li>\n    </Link>\n  )\n}\n\n\n\nexport default React.memo(Ingredient)\n","import React from \"react\";\nimport Ingredient from \"../ingredient/ingredient\";\nimport сolumnsStyle from './ingredient-type.module.css';\nimport { IIngredientType } from \"../../utils/interfaces\";\nimport { useSelector } from \"../../services/types/hooks\";\n\n\n\n\n///компонент контейнер для отрисовки определенного типа ингридиентов\nexport const IngredientType = React.forwardRef<HTMLHeadingElement, IIngredientType>((props, ref) => {\n\n  const { bun, elements } = useSelector(state => state.constructorState);\n\n\n  return (\n    <>\n      <h2 ref={ref} className='text text_type_main-medium mb-6'>{props.ingredientName}</h2>\n      <ul className={`pl-4 pr-4 mb-10 ${сolumnsStyle.column}`}>\n        {props.data && props.data.map(item => (\n          <Ingredient id={item._id} key={item._id} {...item} bun={bun} elements={elements} />\n        ))\n        }\n      </ul>\n    </>\n  )\n})\n\n\n\n","import React, { FunctionComponent } from \"react\";\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport ingredientsStyles from './burger-ingredients.module.css';\nimport { IngredientType } from '../ingredient-type/ingredient-type';\nimport { useSelector, useDispatch } from '../../services/types/hooks';\nimport { useHistory, Route } from \"react-router-dom\";\n\n\n\n\nexport const BurgerIngredients: FunctionComponent = () => {\n\n  const { ingredients } = useSelector(state => state.burgerData);\n\n\n  const [current, setCurrent] = React.useState('Булки')\n  const bunsRef = React.useRef<HTMLDivElement>(null);\n  const soucesRef = React.useRef<HTMLDivElement>(null);\n  const fillingsRef = React.useRef<HTMLDivElement>(null);\n\n  ///вычисляем где сейчас находится скролл и подсвечиваем нужный Tab\n  function determineElementPosition(e: React.ChangeEvent<HTMLDivElement>) {\n    const scrollPosition = e.target.scrollTop;\n    const positionOfSouceContainer = soucesRef.current !== null && soucesRef.current.offsetTop;\n    const positionofFillingsContainer = fillingsRef.current !== null && fillingsRef.current.offsetTop;\n    if (scrollPosition + 303 <= positionOfSouceContainer) {\n      setCurrent('Булки');\n    }\n    else if (scrollPosition + 303 <= positionofFillingsContainer) {\n      setCurrent('Соусы');\n    } else {\n      setCurrent('Начинки');\n    }\n  }\n\n  return (\n\n    <div className={ingredientsStyles.burger__tabs}>\n      <h1 className='text text_type_main-large mt-10 mb-5'>Соберите бургер</h1>\n      <ul className={`mb-10 ${ingredientsStyles.burger__nav}`}>\n        <li>\n          <Tab value=\"Булки\" active={current === 'Булки'} onClick={(value) => { setCurrent(value); bunsRef.current !== null && bunsRef.current.scrollIntoView({ behavior: \"smooth\", }) }} >\n            Булки\n          </Tab>\n        </li>\n        <li>\n          <Tab value=\"Соусы\" active={current === 'Соусы'} onClick={(value) => { setCurrent(value); soucesRef.current !== null && soucesRef.current.scrollIntoView({ behavior: \"smooth\", }) }}>\n            Соусы\n          </Tab>\n        </li>\n        <li>\n          <Tab value=\"Начинки\" active={current === 'Начинки'} onClick={(value) => { setCurrent(value); fillingsRef.current !== null && fillingsRef.current.scrollIntoView({ behavior: \"smooth\", }) }}>\n            Начинки\n          </Tab>\n        </li>\n      </ul>\n      <div className={ingredientsStyles.burger__ingredients} onScroll={(e: any) => { determineElementPosition(e) }}>\n        <IngredientType ingredientName='Булки' data={ingredients.filter(item => item.type === 'bun')} ref={bunsRef} />\n        <IngredientType ingredientName='Соусы' data={ingredients.filter(item => item.type === 'sauce')} ref={soucesRef} />\n        <IngredientType ingredientName='Начинки' data={ingredients.filter(item => item.type === 'main')} ref={fillingsRef} />\n      </div>\n\n    </div>\n  )\n}\n\n\n\n","import React, { FunctionComponent } from \"react\";\nimport { useDispatch, useSelector } from \"../services/types/hooks\";\nimport style from './burger-page.module.css'\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { BurgerConstructor } from \"../components/burger-constructor/burger-constructor\";\nimport { BurgerIngredients } from \"../components/burger-ingredients/burger-ingredients\";\nimport {  getCookie } from \"../utils/utils\";\n\n\n\nexport const Constructor: FunctionComponent = () => {\n\n\n  return (\n\n    <section className={`${style.constructor}`}>\n      <DndProvider backend={HTML5Backend}>\n        <BurgerIngredients />\n        <BurgerConstructor />\n      </DndProvider>\n    </section>\n\n  )\n}\n","import React, { FunctionComponent } from \"react\";\nimport { PasswordInput, EmailInput, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { getCookie } from \"../utils/utils\";\nimport styles from './login-page.module.css';\nimport { loginUser } from \"../services/actions/user-data\";\nimport { useDispatch, useSelector } from \"../services/types/hooks\";\nimport { Redirect, Link, useLocation } from \"react-router-dom\";\nimport { ILocation } from \"../utils/interfaces\";\n\nexport const LoginPage: FunctionComponent = () => {\n  const location = useLocation<{[key in any] : any}>()\n\n\n  const dispatch = useDispatch();\n  const { userName } = useSelector(state => state.userState)\n  const [emailInputValue, setEmailValue] = React.useState('');\n  const [passwordInputValue, setPasswordValue] = React.useState('')\n\n  const token = getCookie('token')\n\n\n  const onEmailInputValueChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setEmailValue(e.target.value)\n  }\n  const onPasswordInputValue = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setPasswordValue(e.target.value)\n  }\n\n\n\n\n if (userName) {\n    return (\n      <Redirect to={ location.state?.from || '/'} />\n    )\n  }\n\n\n\n  return (\n    <>\n\n      <div className={styles.pagestyle}>\n        <form className={styles.form} onSubmit={(e: React.FormEvent<HTMLFormElement>) => { e.preventDefault(); dispatch(loginUser(emailInputValue, passwordInputValue, token)) }}>\n          <fieldset className={styles.inputsfield}>\n            <h2 className={`text text_type_main-medium ${styles.header}`}>Вход</h2>\n            <EmailInput onChange={onEmailInputValueChange} value={emailInputValue} name={'email'} />\n            <PasswordInput onChange={onPasswordInputValue} value={passwordInputValue} name={'password'} />\n          </fieldset>\n          <Button type=\"primary\" size=\"medium\" >Войти</Button>\n          <div className={`${styles.redirectmenu} mb-4 mt-20`}>\n            <p className={`${styles.registration} text text_type_main-default text_color_inactive `}>Вы — новый пользователь?</p>\n            <Link className={`${styles.link} text text_type_main-default`} to='/register'>Зарегистрироваться</Link>\n          </div>\n          <div className={styles.redirectmenu}>\n            <p className={`${styles.password} text text_type_main-default text_color_inactive `}>Забыли пароль?</p>\n            <Link className={`${styles.link} text text_type_main-default`} to='/forgot-password'>Восстановить пароль</Link>\n          </div>\n        </form>\n      </div>\n    </>\n  )\n}\n","import { USER_LOGOUT, CHANGE_EMAIL, CHANGE_NAME, CHANGE_PASSWORD, USER_DATA_SUCCESS, USER_DATA_REQUEST, USER_DATA_ERROR, RESET_ERROR, RESET_SUCCESS, RESET_REQUEST, SET_PASSWORD_ERROR, SET_PASSWORD_REQUEST, SET_PASSWORD_SUCCESS, CREATE_USER_ERROR, CREATE_USER_REQUEST, CREATE_USER_SUCCESS, LOGIN_ERROR, LOGIN_REQUEST, LOGIN_SUCCESS } from \"../constants\";\nimport { AppThunk, TAppDispatch } from \"../types\";\nimport Api from \"../../utils/Api\";\nimport { TUser } from \"../types/data\";\nimport { getCookie, setCookie } from \"../../utils/utils\";\nimport { Token } from \"typescript\";\n\nexport interface ILogout {\n  readonly type: typeof USER_LOGOUT;\n}\n\nexport interface IChangeName {\n  readonly type: typeof CHANGE_NAME;\n  readonly name: string;\n}\n\nexport interface IChangePassword {\n  readonly type: typeof CHANGE_PASSWORD;\n  readonly password: string;\n}\n\nexport interface IChangeEmail {\n  readonly type: typeof CHANGE_EMAIL;\n  readonly email: string;\n}\n\nexport interface IUserDataSuccess {\n  readonly type: typeof USER_DATA_SUCCESS;\n  readonly email: string;\n  readonly name: string;\n}\n\n\nexport interface IUserDataRequest {\n  readonly type: typeof USER_DATA_REQUEST;\n}\n\n\nexport interface IUserDataError {\n  readonly type: typeof USER_DATA_ERROR;\n}\n\nexport interface ILoginRequest {\n  readonly type: typeof LOGIN_REQUEST\n}\n\nexport interface ILoginSuccess {\n  readonly type: typeof LOGIN_SUCCESS;\n  readonly email: string;\n  readonly name: string;\n  readonly status: boolean\n}\n\nexport interface ILoginError {\n  readonly type: typeof LOGIN_ERROR;\n}\n\n\nexport interface IResetError {\n  readonly type: typeof RESET_ERROR;\n}\n\nexport interface IResetSuccess {\n  readonly type: typeof RESET_SUCCESS;\n  readonly success: boolean;\n}\n\nexport interface IResetRequest {\n  readonly type: typeof RESET_REQUEST;\n}\n\nexport interface ISetPasswordError {\n  readonly type: typeof SET_PASSWORD_ERROR\n}\n\nexport interface ISetPasswordRequest {\n  readonly type: typeof SET_PASSWORD_REQUEST,\n}\n\nexport interface ISetPasswordSuccess {\n  readonly type: typeof SET_PASSWORD_SUCCESS,\n  readonly success: boolean\n}\n\nexport interface ICreateUserRequest {\n  readonly type: typeof CREATE_USER_REQUEST\n}\n\nexport interface ICreateUserSuccess {\n  readonly type: typeof CREATE_USER_SUCCESS,\n  readonly payload: TUser\n}\n\nexport interface ICreateUserError {\n  readonly type: typeof CREATE_USER_ERROR\n}\n\nexport type TUserRequestActions = ILogout | IChangeName | IChangeEmail | IChangePassword | IUserDataRequest | IUserDataError | IUserDataSuccess | IResetError | IResetSuccess | IResetRequest | ISetPasswordError | ISetPasswordRequest | ISetPasswordSuccess | ICreateUserRequest | ICreateUserSuccess | ICreateUserError | ILoginError | ILoginRequest | ILoginSuccess;\n\n\nexport const refreshUser: AppThunk = (email: string, password: string, name: string, token: string) => {\n  return function (dispatch: TAppDispatch) {\n    Api.refreshUser(email, password, name, token)\n      .then(res => dispatch({ type: CREATE_USER_SUCCESS, payload: res }))\n  }\n}\n\nexport const getUserData: AppThunk = (token: string, refresh: string, getCookie: ()=> void ) => {\n  return function (dispatch: TAppDispatch) {\n    dispatch({ type: USER_DATA_REQUEST });\n    Api.getUser(token)\n      .then(res => dispatch({ type: USER_DATA_SUCCESS, email: res.user.email, name: res.user.name }))\n      .catch(err =>  dispatch({ type: USER_DATA_ERROR }) )\n  }\n}\n\n\nexport const getPasswordReset: AppThunk = (email: string, token:string) => {\n  return function (dispatch: TAppDispatch) {\n    dispatch({ type: RESET_REQUEST });\n    Api.setPasswordReset(email, token)\n      .then(res => dispatch({ type: RESET_SUCCESS, success: res.success }))\n      .catch(err =>  dispatch({ type: RESET_ERROR }) )\n  }\n}\n\nexport const setNewPassword: AppThunk = (password: string, token: string) => {\n  return function (dispatch: TAppDispatch) {\n    dispatch({ type: SET_PASSWORD_REQUEST })\n    Api.setNewPassword(password, token)\n      .then(res => dispatch({ type: SET_PASSWORD_SUCCESS, success: res.success }))\n      .catch(err => dispatch({ type: SET_PASSWORD_ERROR }))\n  }\n}\n\nexport const createUser: AppThunk = (email: string, password: string, name: string,token:string) => {\n  return function (dispatch: TAppDispatch) {\n    dispatch({ type: CREATE_USER_REQUEST })\n    Api.createNewUser(email, password, name, token)\n      .then(res => {\n        setCookie('token', res.accessToken.split('Bearer ')[1], { expires: 1200000 });\n        setCookie('refreshToken', res.refreshToken);\n        dispatch({ type: CREATE_USER_SUCCESS, payload: res })\n      })\n      .catch(err => dispatch({ type: CREATE_USER_ERROR }))\n  }\n}\n\nexport const loginUser: AppThunk = (email: string, password: string, token:string) => {\n  return function (dispatch: TAppDispatch) {\n    dispatch({ type: LOGIN_REQUEST });\n    Api.loginRequest(email, password, token)\n      .then(res => {\n        setCookie('token', res.accessToken.split('Bearer ')[1], { expires: 1200000 });\n        setCookie('refreshToken', res.refreshToken);\n        dispatch({ type: LOGIN_SUCCESS, email: res.user.email, name: res.user.name, status: res.success })\n      })\n      .catch(err => dispatch({ type: LOGIN_ERROR }))\n  }\n}\n","import React, { FunctionComponent } from \"react\";\nimport { PasswordInput, EmailInput, Button, Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport styles from './registration.module.css';\nimport { createUser } from \"../services/actions/user-data\";\nimport { useSelector, useDispatch } from \"../services/types/hooks\";\nimport { getCookie } from \"../utils/utils\";\n\nexport const RegistrationPage: FunctionComponent = () => {\n  const dispatch = useDispatch();\n  const { userEmail, isUserSent, userName } = useSelector(state => state.userState)\n  console.log(userEmail)\n  const [nameInputValue, setNameInput] = React.useState('');\n  const [emailInputValue, setEmailInput] = React.useState('');\n  const [passwordInputValue, setPasswordInput] = React.useState('');\n  const token = getCookie('token')\n  const onNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setNameInput(e.target.value)\n  }\n  const onEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setEmailInput(e.target.value)\n  }\n  const onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setPasswordInput(e.target.value)\n  }\n\n  const newUserCreating = (evt: React.FormEvent<HTMLFormElement>) => {\n    evt.preventDefault();\n    dispatch(createUser(emailInputValue, passwordInputValue, nameInputValue,token))\n    setNameInput('');\n    setEmailInput('');\n    setPasswordInput('');\n  }\n\n  if (userName) {\n    return (\n      <Redirect to='/' />\n    )\n  }\n\n  return (\n    <div className={styles.pagestyle}>\n      <form className={styles.form} onSubmit={(evt) => newUserCreating(evt)}>\n        <fieldset className={styles.inputsfield}>\n          <h2 className={`text text_type_main-medium ${styles.header}`}>Регистрация</h2>\n          <Input type='text' value={nameInputValue} onChange={onNameChange} placeholder={'Name'} />\n          <EmailInput onChange={onEmailChange} value={emailInputValue} name={'email'} />\n          <PasswordInput onChange={onPasswordChange} value={passwordInputValue} name={'password'} />\n        </fieldset>\n        <Button type=\"primary\" size=\"medium\" >{isUserSent ? 'Запрос отправлен' : 'Зарегистрироваться'}</Button>\n        <div className={`${styles.redirectmenu}  mt-20`}>\n          <p className={`${styles.registration} text text_type_main-default text_color_inactive `}>Уже зарегистрированы?</p>\n          <Link className={`${styles.link} text text_type_main-default`} to='/login'>Войти</Link>\n        </div>\n      </form>\n    </div>\n  )\n}\n","import React, { FunctionComponent } from \"react\";\nimport { Button, Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { Link } from \"react-router-dom\";\nimport styles from './recovery.module.css';\nimport { useSelector, useDispatch } from \"../services/types/hooks\";\nimport { getPasswordReset } from \"../services/actions/user-data\";\nimport { Redirect } from \"react-router-dom\";\nimport { getCookie } from \"../utils/utils\";\n\nexport const RecoveryPage: FunctionComponent = () => {\n  const { resetAnswer, resetPending, userName } = useSelector(state => state.userState);\n  const token = getCookie('token')\n  const dispatch = useDispatch()\n  const [value, setValue] = React.useState('')\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(e.target.value)\n  }\n\n  const sendResetPasswordRequest = (value: string, event:React.FormEvent<HTMLFormElement>) => {\n    event?.preventDefault()\n    dispatch(getPasswordReset(value,token))\n  }\n\n  if (userName) {\n    return (\n      <Redirect to='/' />\n    )\n  }\n\n  return (\n    <>\n      {resetAnswer && <Redirect to='/reset-password'/>}\n        <div className={styles.pagestyle}>\n          <form className={styles.form} onSubmit={(event) => sendResetPasswordRequest(value, event)}>\n            <fieldset className={styles.inputsfield}>\n              <h2 className={`text text_type_main-medium ${styles.header}`}>Восстановление пароля</h2>\n              <Input type='email' value={value} onChange={onChange} placeholder={'Укажите e-mail'} />\n            </fieldset>\n            <Button type=\"primary\" size=\"medium\" >{resetPending ? 'Идет запрос...' : 'Восстановить'}</Button>\n            <div className={`${styles.redirectmenu}  mt-20`}>\n              <p className={`${styles.registration} text text_type_main-default text_color_inactive `}>Вспомнили пароль?</p>\n              <Link className={`${styles.link} text text_type_main-default`} to='/login'>Войти</Link>\n            </div>\n          </form>\n        </div>\n      </>\n  )\n\n  }\n\n\n\n\n","import React, { FunctionComponent } from \"react\";\nimport { Button, Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport styles from './reset.module.css';\nimport { useDispatch, useSelector } from \"../services/types/hooks\";\nimport { setNewPassword } from \"../services/actions/user-data\";\nimport { getCookie } from \"../utils/utils\";\n\nexport const ResetPage: FunctionComponent = () => {\n  const dispatch = useDispatch();\n  const { isPasswordChanged, resetAnswer, userName } = useSelector(store => store.userState)\n  const [passwordInputValue, setPasswordInputValue] = React.useState('');\n  const [tokenInputValue, setTokenInputValue] = React.useState('');\n  const [error, setError] = React.useState(false);\n  const onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setPasswordInputValue(e.target.value)\n  }\n\n  const onTokenChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setTokenInputValue(e.target.value)\n  }\n  const [visible, setVisible] = React.useState(false);\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const onIconClick = () => {\n    setVisible(true);\n    setTimeout(() => inputRef.current?.focus(), 0);\n  };\n  const validateField = (value: string) => {\n    setError(value.length < 6);\n  };\n\n  const onBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    if (e.target.value) {\n      validateField(e.target.value);\n    } else {\n      setError(false);\n    }\n    setVisible(false);\n  };\n\n  const resetUserPassword = (evt: React.FormEvent<HTMLFormElement>, password: string, token: string) => {\n    evt.preventDefault();\n    dispatch(setNewPassword(password, token))\n  }\n\n  if (!resetAnswer) {\n    return (\n      <Redirect to='/login' />\n    )\n  }\n\n  if (userName) {\n    return (\n      <Redirect to='/' />\n    )\n  }\n\n  return (\n    <div className={styles.pagestyle}>\n      <form className={styles.form} onSubmit={evt => resetUserPassword(evt, passwordInputValue, tokenInputValue)}>\n        <fieldset className={styles.inputsfield}>\n          <h2 className={`text text_type_main-medium ${styles.header}`}>Восстановление пароля</h2>\n          <Input errorText={'Некорректный пароль'} error={error} ref={inputRef} icon={visible ? 'HideIcon' : 'ShowIcon'} type={visible ? 'text' : 'password'} onChange={onPasswordChange} onBlur={onBlur} onIconClick={onIconClick} value={passwordInputValue} name={'password'} placeholder='Введите новый пароль' />\n          <Input onChange={onTokenChange} value={tokenInputValue} name={'password'} placeholder='Введите код из письма' />\n        </fieldset>\n        <Button type=\"primary\" size=\"medium\" >{isPasswordChanged ? 'Пароль изменен' : 'Сохранить'}</Button>\n        <div className={`${styles.redirectmenu}  mt-20`}>\n          <p className={`${styles.password} text text_type_main-default text_color_inactive `}>Вспомнили пароль?</p>\n          <Link className={`${styles.link} text text_type_main-default`} to='/login'>Войти</Link>\n        </div>\n      </form>\n\n    </div>\n  )\n}\n","import React, { FunctionComponent } from \"react\";\nimport { Input, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport styles from './form-element.module.css';\nimport { useDispatch, useSelector } from \"../../services/types/hooks\";\nimport { getUserData, refreshUser } from \"../../services/actions/user-data\";\nimport { deleteCookie } from \"../../utils/utils\";\nimport { CHANGE_EMAIL, CHANGE_PASSWORD, CHANGE_NAME, USER_DATA_SUCCESS } from \"../../services/constants\";\nimport { getCookie } from \"../../utils/utils\";\n\nexport const FormElement: FunctionComponent = () => {\n  const { formName, formEmail, formPassword, userName, userEmail} = useSelector(state => state.userState)\n  console.log(formName, formEmail, formPassword)\n  console.log(userName, userEmail)\n  const dispatch = useDispatch()\n\n  const nameInputRef = React.useRef<HTMLInputElement>(null);\n  const loginInputRef = React.useRef<HTMLInputElement>(null);\n  const passwordInputRef = React.useRef<HTMLInputElement>(null);\n  const onNameClick = () => {\n    setTimeout(() => nameInputRef.current && nameInputRef.current.focus(), 0)\n  }\n  const onLoginClick = () => {\n    setTimeout(() => loginInputRef.current && loginInputRef.current.focus(), 0)\n  }\n  const onPasswordClick = () => {\n    setTimeout(() => passwordInputRef.current && passwordInputRef.current.focus(), 0)\n  }\n\n\n\n\n  return (\n    <div className={styles.formelement}>\n      <form className={styles.form} onSubmit={(e) => { e.preventDefault(); dispatch(refreshUser(formEmail, formPassword, formName,getCookie('token'))) }}>\n        <fieldset className={styles.fieldset}>\n          <Input onIconClick={onNameClick} ref={nameInputRef} type={'text'} placeholder={'Имя'} onChange={(e) => dispatch({ type: CHANGE_NAME, name: e.target.value })} icon={'EditIcon'} value={formName} />\n          <Input onIconClick={onLoginClick} ref={loginInputRef} type={'text'} placeholder={'Логин'} onChange={e => dispatch({ type: CHANGE_EMAIL, email: e.target.value })} icon={'EditIcon'} value={formEmail} />\n          <Input onIconClick={onPasswordClick} ref={passwordInputRef} type={'password'} placeholder={'Пароль'} onChange={e => dispatch({ type: CHANGE_PASSWORD, password: e.target.value })} icon={'EditIcon'} value={formPassword} />\n        </fieldset>\n        <div className={styles.buttonconteiner}>\n        <Button  type=\"primary\" size=\"medium\" >Сохранить</Button>\n        <Button onClick={() => dispatch({type: USER_DATA_SUCCESS, email: userEmail, name:userName})} type=\"primary\" size=\"medium\" >Отмена</Button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\n","import React, { FunctionComponent } from \"react\";\nimport { FormElement } from \"../components/form-element/form-element\";\nimport styles from './profile.module.css';\nimport { Link, useLocation} from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"../services/types/hooks\";\nimport Api from \"../utils/Api\";\nimport { getCookie, deleteCookie, setCookie } from \"../utils/utils\";\nimport { getUserData } from \"../services/actions/user-data\";\nimport { refreshMainToken } from \"../utils/utils\";\nimport { USER_LOGOUT } from \"../services/constants\";\n\n\nexport const ProfilePage: FunctionComponent = () => {\n\n  const location = useLocation();\n\n  const dispatch = useDispatch();\n\n\n\n  React.useEffect(() => {\n    const interval = setInterval(refreshMainToken, 100000)\n    return () => {\n      clearInterval(interval)\n    }\n  },[])\n\n\n  return (\n    <div className={styles.profileconteiner}>\n      <div className={styles.navconteiner}>\n        <nav className={`${styles.navmenu} mr-15`}>\n          <ul className={styles.list}>\n            <li className={styles.listelement}>\n              <Link className={ location.pathname === '/profile' ? `${styles.currentlinktext} text text_type_main-medium`: `${styles.linktext} text text_type_main-medium`} to='/profile' >Профиль</Link>\n            </li>\n            <li className={styles.listelement}>\n              <Link className={location.pathname === '/profile/orders' ? `${styles.currentlinktext} text text_type_main-medium`: `${styles.linktext} text text_type_main-medium`} to='/profile/orders'>История заказов</Link>\n            </li>\n            <li className={styles.listelement} onClick={() => { const match = getCookie('refreshToken'); match && Api.logoutRequest(match); deleteCookie('token'); deleteCookie('refreshToken'); dispatch({type:USER_LOGOUT}) }}>\n              <Link className={`${styles.linktext} text text_type_main-medium`} to='/profile'>Выход</Link>\n            </li>\n          </ul>\n        </nav>\n        <p className={`${styles.blockquote} text text_type_main-default text_color_inactive mt-20`}>В этом разделе вы можете&nbsp;  изменить свои персональные данные</p>\n\n      </div>\n      <FormElement />\n\n    </div>\n\n  )\n\n}\n","import loaderStyles from './preloader.module.css'\n\nexport function Preloader() {\n  return (\n    <div className={loaderStyles.loaderConteiner}>\n      <div className={loaderStyles.lds_ripple}><div></div><div></div></div>\n    </div>\n  )\n}\n","import { Route, Redirect } from \"react-router-dom\";\nimport React, { FunctionComponent } from \"react\";\nimport { IResetPageProps } from \"../../utils/interfaces\";\n\n\nexport const ProtectedRoute: FunctionComponent<IResetPageProps> = ({ path, children, redirectPath, check }) => {\n\n\n  return (\n    <Route path={path} exact={true} render={({ location }) => check ? (children) : (<Redirect to={{\n      pathname: redirectPath, state: { from: location }\n    }\n    } />)} />\n\n\n  )\n\n\n\n}\n","import React from \"react\";\nimport ingredientModalStyles from './ingredient-page.module.css';\nimport { useSelector } from \"../services/types/hooks\";\nimport { useParams } from \"react-router-dom\";\n\n\n\nexport const IngredientPage = () => {\n  const { currentItem } = useSelector(state => state.currentSelect);\n  const { ingredients } = useSelector(state => state.burgerData)\n  const { id } = useParams<{ id: string }>()\n\n  const [state, setState] = React.useState(currentItem)\n\n\n\n\n\n\n  function findCurrent() {\n    const current = ingredients.find((item: typeof currentItem) => { return item._id === id });\n    current && setState(current)\n  }\n\n\n  React.useEffect(() => {\n\n    findCurrent()\n\n  }, [])\n\n\n\n  return (\n\n    < div className={`${ingredientModalStyles.modal__conteiner} mb-15`}>\n      <img src={state.image} alt={currentItem.name} className={`${ingredientModalStyles.modal__image} mb-4`} />\n      <p className='mb-8 text text_type_main-medium'>{state.name}</p>\n      <div >\n        <ul className={ingredientModalStyles.modal__list}>\n          <li className={`mr-5 text text_type_main-default text_color_inactive ${ingredientModalStyles.modal__listelement}`}>\n            <p className={`${ingredientModalStyles.modal__text} mb-2`}>Калории, ккал</p>\n            <p className={`${ingredientModalStyles.modal__text} text text_type_digits-default`}>{state.calories}</p>\n          </li>\n          <li className={`mr-5 text text_type_main-default text_color_inactive ${ingredientModalStyles.modal__listelement}`}>\n            <p className={`${ingredientModalStyles.modal__text} mb-2`}>Белки, г</p>\n            <p className={`${ingredientModalStyles.modal__text} text text_type_digits-default`}>{state.proteins}</p>\n          </li>\n          <li className={`mr-5 text text_type_main-default text_color_inactive ${ingredientModalStyles.modal__listelement}`}>\n            <p className={`${ingredientModalStyles.modal__text} mb-2`}>Жиры, г</p>\n            <p className={`${ingredientModalStyles.modal__text} text text_type_digits-default`}>{state.fat}</p></li>\n          <li className={` text text_type_main-default text_color_inactive ${ingredientModalStyles.modal__listelement}`}>\n            <p className={`${ingredientModalStyles.modal__text} mb-2`}>Углеводы, г</p>\n            <p className={`${ingredientModalStyles.modal__text} text text_type_digits-default`}>{state.carbohydrates}</p></li>\n        </ul>\n      </div>\n    </div >\n\n\n  )\n\n}\n","import { FunctionComponent } from 'react';\nimport ingredientModalStyles from './ingredient-details.module.css';\nimport { TIngredient } from '../../services/types/data';\n\nexport const IngredientDetails: FunctionComponent<TIngredient | {[key in any]: never}> = (props) => {\n\n  return (\n    <div className={`${ingredientModalStyles.modal__conteiner} mb-15`}>\n      <img src={props.image} alt={props.name} className={`${ingredientModalStyles.modal__image} mb-4`} />\n      <p className='mb-8 text text_type_main-medium'>{props.name}</p>\n      <div >\n        <ul className={ingredientModalStyles.modal__list}>\n          <li className={`mr-5 text text_type_main-default text_color_inactive ${ingredientModalStyles.modal__listelement}`}>\n            <p className={`${ingredientModalStyles.modal__text} mb-2`}>Калории, ккал</p>\n            <p className={`${ingredientModalStyles.modal__text} text text_type_digits-default`}>{props.calories}</p>\n          </li>\n          <li className={`mr-5 text text_type_main-default text_color_inactive ${ingredientModalStyles.modal__listelement}`}>\n            <p className={`${ingredientModalStyles.modal__text} mb-2`}>Белки, г</p>\n            <p className={`${ingredientModalStyles.modal__text} text text_type_digits-default`}>{props.proteins}</p>\n          </li>\n          <li className={`mr-5 text text_type_main-default text_color_inactive ${ingredientModalStyles.modal__listelement}`}>\n            <p className={`${ingredientModalStyles.modal__text} mb-2`}>Жиры, г</p>\n            <p className={`${ingredientModalStyles.modal__text} text text_type_digits-default`}>{props.fat}</p></li>\n          <li className={` text text_type_main-default text_color_inactive ${ingredientModalStyles.modal__listelement}`}>\n            <p className={`${ingredientModalStyles.modal__text} mb-2`}>Углеводы, г</p>\n            <p className={`${ingredientModalStyles.modal__text} text text_type_digits-default`}>{props.carbohydrates}</p></li>\n        </ul>\n      </div>\n    </div>\n\n  )\n}\n\n\n","import React, { FunctionComponent } from 'react';\nimport { AppHeader } from '../app-header/app-header';\nimport styles from './app.module.css'\nimport { Switch, Route, useLocation, useHistory, Router } from 'react-router-dom';\nimport { useDispatch } from '../../services/types/hooks';\nimport { getBurgerData } from '../../services/actions/burger-ingredients';\nimport { Constructor } from '../../pages/burger-constructor-page';\nimport { LoginPage } from '../../pages/login-page';\nimport { RegistrationPage } from '../../pages/registration';\nimport { RecoveryPage } from '../../pages/recovery';\nimport { ResetPage } from '../../pages/reset';\nimport { ProfilePage } from '../../pages/profile';\nimport { Preloader } from '../preloader/preloader';\nimport { useSelector } from '../../services/types/hooks';\nimport { ProtectedRoute } from '../protected-route/protected-route';\nimport { getUserData } from '../../services/actions/user-data';\nimport { deleteCookie, getCookie, setCookie, refreshMainToken } from '../../utils/utils';\nimport { IngredientPage } from '../../pages/ingredient-page';\nimport { Modal } from '../modal/modal';\nimport { IngredientDetails } from '../ingredient-details/ingredient-details';\nimport { CLICK_ON_CLOSE_BUTTON } from '../../services/constants';\nimport Api from '../../utils/Api';\n\n\n\nconst App: FunctionComponent = () => {\n  const history = useHistory()\n  const location = useLocation<{ [key in any]: any }>();\n  const isPush = history.action === 'PUSH';\n\n\n  const background = isPush && location.state && location.state.background;\n\n  const dispatch = useDispatch();\n  const { dataRequest } = useSelector(store => store.burgerData)\n  const { userName } = useSelector(store => store.userState)\n  const { currentItem } = useSelector(state => state.currentSelect)\n\n\n\n  const refresh = getCookie('refreshToken')\n  const token = getCookie('token')\n\n\n\n  React.useEffect(() => {\n    dispatch(getBurgerData());\n    refresh && Api.refreshToken(refresh).then(res => { setCookie('token', res.accessToken.split('Bearer ')[1]); setCookie('refreshToken', res.refreshToken) })\n      .then(() => {\n        dispatch(getUserData(token))\n      })\n      const interval = setInterval(refreshMainToken, 100000)\n      return () => {\n        clearInterval(interval)\n      }\n  }, [])\n\n\n  return (\n    dataRequest ?\n      (<Preloader />)\n      :\n      (<>\n        <AppHeader />\n\n        <main className={styles.app}>\n          <Switch location={background || location} >\n            <Route path='/' exact={true}>\n              <Constructor />\n            </Route>\n            <Route path='/login' exact={true}>\n              <LoginPage />\n            </Route>\n            <Route path='/register' exact={true}>\n              <RegistrationPage />\n            </Route>\n            <Route path='/forgot-password' exact={true}>\n              <RecoveryPage />\n            </Route>\n            <Route path='/reset-password' exact={true}>\n              <ResetPage />\n            </Route>\n            <ProtectedRoute path='/profile' redirectPath='/login' check={userName}>\n              <ProfilePage />\n            </ProtectedRoute>\n            <Route path='/ingredients/:id' exact={true} >\n              <IngredientPage />\n            </Route>\n            <Route  >\n              <div>\n                <h1>Empty Page</h1>\n              </div>\n            </Route>\n          </Switch>\n\n          {background && <Route path='/ingredients/:id' >\n            <Modal headerText={'Детали ингридиента'} modalStyles={`text text_type_main-large`} modalHeaderStyles={`${styles.modal__header} mt-10 mr-10 ml-10`} closeModal={() => { history.goBack(); dispatch({ type: CLICK_ON_CLOSE_BUTTON }) }}><IngredientDetails {...currentItem} /></Modal>\n          </Route>}\n        </main>\n\n      </>)\n  )\n}\n\nexport default App;\n\n","import Api from \"../../utils/Api\";\nimport { BURGER_DATA_REQUEST, BURGER_DATA_SUCCESS, BURGER_DATA_ERROR, ADD_AMMOUNT, DECREASE_AMOUNT, CLEAN_INGREDIENTS_AMOUNTS } from \"../constants\";\nimport { TIngredient } from \"../types/data\";\nimport { AppThunk, TAppDispatch } from \"../types\";\n\nexport interface IBurgerDataRequest {\n  readonly type: typeof BURGER_DATA_REQUEST;\n}\n\nexport interface IBurgerDataSuccessAction {\n  readonly type: typeof BURGER_DATA_SUCCESS;\n  readonly data: Array<TIngredient>;\n}\n\nexport interface IBurgerDataErrorAction {\n  readonly type: typeof BURGER_DATA_ERROR;\n}\n\nexport interface IAddAmountAction {\n  readonly type: typeof ADD_AMMOUNT;\n  readonly id: string;\n}\n\nexport interface IDecreaseAmountAction {\n  readonly type: typeof DECREASE_AMOUNT;\n  readonly id: string;\n}\n\nexport interface ICleanIngredientsAmount {\n  readonly type: typeof CLEAN_INGREDIENTS_AMOUNTS;\n}\n\nexport type TBurgerIngredientsActions = IBurgerDataRequest | IBurgerDataSuccessAction | IBurgerDataErrorAction | IAddAmountAction | IDecreaseAmountAction | ICleanIngredientsAmount;\n\n\n\n\n\n\n\nexport const getBurgerData: AppThunk = () => {\n  return function (dispatch: TAppDispatch) {\n    dispatch({ type: BURGER_DATA_REQUEST })\n    Api.getBurgerIngredientsData()\n      .then(res => {\n        dispatch({\n          type: BURGER_DATA_SUCCESS,\n          data: res.data,\n        })\n      })\n      .catch(err => { dispatch({ type: BURGER_DATA_ERROR }) })\n  }\n}\n\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { BURGER_DATA_REQUEST, BURGER_DATA_SUCCESS, BURGER_DATA_ERROR, ADD_AMMOUNT, DECREASE_AMOUNT, CLEAN_INGREDIENTS_AMOUNTS } from \"../constants\";\nimport { TIngredient } from '../types/data';\nimport { TBurgerIngredientsActions } from '../actions/burger-ingredients';\n\ntype TBurgerIngredientsState = {\n  ingredients: Array<TIngredient>;\n  dataRequest: boolean;\n  dataRequestFailed: boolean;\n}\n\nconst initialState: TBurgerIngredientsState = {\n  ingredients: [],\n  dataRequest: true,\n  dataRequestFailed: false\n}\n\nexport const burgerDataReducer = (state = initialState, action: TBurgerIngredientsActions): TBurgerIngredientsState => {\n  switch (action.type) {\n    case BURGER_DATA_REQUEST:\n      return {\n        ...state,\n\n      };\n    case BURGER_DATA_SUCCESS:\n      return {\n        ...state,\n        ingredients: action.data.map(item => { return { ...item, amount: 0 } }),\n        dataRequest: false\n      };\n    case BURGER_DATA_ERROR:\n      return {\n        ...state,\n        ingredients: [],\n        dataRequest: false,\n        dataRequestFailed: true,\n\n      };\n    case ADD_AMMOUNT:\n      return {\n        ...state,\n        ingredients: [...state.ingredients].map(item => {\n          return item._id === action.id && item.type !== 'bun' ? { ...item, amount: item.amount + 1 } : item\n        })\n      }\n    case DECREASE_AMOUNT:\n      return {\n        ...state,\n        ingredients: [...state.ingredients].map(item => {\n          return item._id === action.id ? { ...item, amount: item.amount - 1 } : item\n        })\n      }\n    case CLEAN_INGREDIENTS_AMOUNTS:\n      return {\n        ...state,\n        ingredients: [...state.ingredients].map(item => {\n          return { ...item, amount: 0 }\n        })\n      }\n    default:\n      return state;\n  }\n}\n","import { CLICK_ON_INGREDIENT, CLICK_ON_CLOSE_BUTTON } from \"../constants\";\nimport { TIngredientActions } from \"../actions/ingredient\";\nimport { TIngredient } from '../types/data';\n\ntype TCurrentChoice = {\n  itemIsClicked: boolean;\n  currentItem: TIngredient | { [key in any]: never };\n}\n\nconst currentChoiceInitialState: TCurrentChoice = {\n  itemIsClicked: false,\n  currentItem: {}\n}\n\n\nexport const ingredientReducer = (state = currentChoiceInitialState, action: TIngredientActions): TCurrentChoice => {\n  switch (action.type) {\n    case CLICK_ON_INGREDIENT:\n      return {\n        ...state,\n        itemIsClicked: true,\n        currentItem: action.item[0]\n      }\n    case CLICK_ON_CLOSE_BUTTON:\n      return {\n        ...state,\n        itemIsClicked: false,\n        currentItem: {}\n      }\n    default:\n      return state\n  }\n}\n","import { GET_ORDER_REQUEST, GET_ORDER_SUCCESS, GET_ORDER_ERROR, OPEN_ORDER_POPUP, CLOSE_ORDER_POPUP } from \"../constants\";\nimport { TOrderDetailsActions } from \"../actions/order-details\";\nimport { TOrder } from '../types/data'\n\ntype TOrderState = {\n  orderRequest: boolean,\n  requestIsSuccessed: boolean,\n  orderFailure: boolean,\n  orderNumber: number | null,\n  wholeOrder: TOrder | {},\n  orderButtonIsClicked: boolean,\n  buttonState: boolean;\n}\n\nconst orderInitialState: TOrderState = {\n  orderRequest: false,\n  requestIsSuccessed: false,\n  orderFailure: false,\n  orderNumber: null,\n  wholeOrder: {},\n  orderButtonIsClicked: false,\n  buttonState: true\n\n}\n\n\nexport const orderReducer = (state = orderInitialState, action: TOrderDetailsActions): TOrderState => {\n  switch (action.type) {\n    case OPEN_ORDER_POPUP:\n      return {\n        ...state,\n        orderButtonIsClicked: true,\n\n      }\n    case CLOSE_ORDER_POPUP:\n      return {\n        ...state,\n        orderButtonIsClicked: false,\n        requestIsSuccessed: false,\n        orderNumber: null,\n        wholeOrder: {},\n        buttonState: false\n      }\n    case GET_ORDER_REQUEST:\n      return {\n        ...state,\n        orderRequest: true\n      }\n    case GET_ORDER_SUCCESS:\n      return {\n        ...state,\n        orderRequest: false,\n        orderNumber: action.data,\n        wholeOrder: action.orderData,\n        requestIsSuccessed: action.result,\n\n      }\n    case GET_ORDER_ERROR:\n      return {\n        ...state,\n        orderFailure: true,\n        orderNumber: null,\n      }\n    default:\n      return state\n  }\n}\n","import { ADD_ITEM, ADD_BUN, DELETE_INGREDIENT, CLEAN_STATE, REORDER_INGREDIENTS } from \"../constants\";\nimport { TBurgerConstructorActions } from \"../actions/burger-consructor\";\nimport { TIngredient } from \"../types/data\"\n\ntype TBurgerConstructorState = {\n  elements: Array<TIngredient>;\n  bun: TIngredient | { [key in any]: never };\n}\n\nconst constructorInitialState: TBurgerConstructorState = {\n  elements: [],\n  bun: {}\n}\n\nexport const constructorReducer = (state = constructorInitialState, action: TBurgerConstructorActions): TBurgerConstructorState => {\n  switch (action.type) {\n    case ADD_BUN:\n      return {\n        ...state,\n        bun: action.bunItem ? { ...action.bunItem, amount: 2 } : state.bun\n      }\n    case ADD_ITEM:\n      return {\n        ...state,\n        elements: [...state.elements, ...action.data]\n      }\n    case DELETE_INGREDIENT:\n      return {\n        ...state,\n        elements: [...state.elements].filter(item => { return item.uid !== action.id })\n\n      }\n    case REORDER_INGREDIENTS:\n      return {\n        ...state,\n        elements: action.data\n      }\n    case CLEAN_STATE:\n      return {\n        ...state,\n        elements: [],\n        bun: {}\n      }\n    default:\n      return state\n\n  }\n}\n","import { USER_LOGOUT, CHANGE_NAME, CHANGE_EMAIL, CHANGE_PASSWORD, USER_DATA_SUCCESS, USER_DATA_ERROR, USER_DATA_REQUEST, RESET_REQUEST, RESET_ERROR, RESET_SUCCESS, SET_PASSWORD_SUCCESS, CREATE_USER_REQUEST, CREATE_USER_SUCCESS, LOGIN_REQUEST, LOGIN_SUCCESS } from \"../constants\";\nimport { TUserRequestActions } from \"../actions/user-data\";\n\ntype TUserState = {\n  resetAnswer: boolean | '';\n  resetPending: boolean;\n  resetPasswordError: boolean;\n  isPasswordChanged: boolean;\n  userName: string;\n  userEmail: string;\n  isUserSent: boolean;\n  userPassword: string;\n  loginStatus: boolean;\n  formName: string;\n  formEmail: string;\n  formPassword: string;\n\n}\n\n\nconst userInitialState: TUserState = {\n  resetAnswer: false,\n  resetPending: false,\n  resetPasswordError: false,\n  isPasswordChanged: false,\n  userEmail: '',\n  userName: '',\n  isUserSent: false,\n  userPassword: '',\n  loginStatus: false,\n  formName: '',\n  formEmail: '',\n  formPassword: ''\n}\n\n\nexport const userDataReducer = (state = userInitialState, action: TUserRequestActions) => {\n  switch (action.type) {\n    case CHANGE_PASSWORD:\n      return {\n        ...state,\n        formPassword: action.password\n      }\n    case CHANGE_EMAIL:\n      return {\n        ...state,\n        formEmail: action.email\n      }\n    case CHANGE_NAME:\n      return {\n        ...state,\n        formName: action.name\n      }\n    case USER_LOGOUT:\n      return {\n        userEmail: '',\n        userName: '',\n        userPassword: ''\n      }\n    case USER_DATA_REQUEST:\n      return {\n        ...state\n      }\n    case USER_DATA_SUCCESS:\n      return {\n        ...state,\n        userName: action.name,\n        formName: action.name,\n        formEmail: action.email,\n        userEmail: action.email\n      }\n    case LOGIN_SUCCESS:\n      return {\n        ...state,\n        userName: action.name,\n        userEmail: action.email,\n        loginStatus: action.status,\n        formName: action.name,\n        formEmail: action.email\n      }\n    case CREATE_USER_REQUEST:\n      return {\n        ...state,\n        isUserSent: true\n      }\n    case CREATE_USER_SUCCESS:\n      return {\n        ...state,\n        isUserSent: false,\n        userName: action.payload.user.name,\n        userEmail: action.payload.user.email,\n\n      }\n    case RESET_REQUEST:\n      return {\n        ...state,\n        resetPending: true\n      }\n    case RESET_SUCCESS:\n      return {\n        resetAnswer: action.success,\n        resetPending: false\n      }\n    case RESET_ERROR:\n      return {\n        ...state,\n        resetPasswordError: true\n      }\n    case SET_PASSWORD_SUCCESS:\n      return {\n        ...state,\n        isPasswordChanged: true\n      }\n    default:\n      return state\n\n  }\n}\n\n","import { combineReducers } from 'redux';\n\nimport { burgerDataReducer } from './burger-ingredients'\nimport { ingredientReducer } from './ingredient';\nimport { orderReducer } from './order-details';\nimport { constructorReducer } from './burger-constructor';\nimport { userDataReducer } from './user';\n\nexport const rootReducer = combineReducers({\n  burgerData: burgerDataReducer,\n  currentSelect: ingredientReducer,\n  currentOrder: orderReducer,\n  constructorState: constructorReducer,\n  userState: userDataReducer\n})\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app/app';\nimport reportWebVitals from './reportWebVitals';\nimport './index.css';\nimport { compose, createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport { rootReducer } from './services/reducers/index';\nimport thunk from 'redux-thunk';\nimport { BrowserRouter, Router,useHistory } from 'react-router-dom';\n\n\n\nconst composeEnhancers =\n  typeof window === 'object' && (window && (window as any)).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? (window && (window as any)).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n    : compose;\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\nexport const state = createStore(rootReducer, enhancer);\n\nReactDOM.render(\n\n  <React.StrictMode>\n    <Provider store={state}>\n      <BrowserRouter>\n      <App />\n      </BrowserRouter>\n\n\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"login-page_form__3_y5t\",\"inputsfield\":\"login-page_inputsfield__2jYix\",\"pagestyle\":\"login-page_pagestyle__2Y9qN\",\"header\":\"login-page_header__3Brqp\",\"link\":\"login-page_link__2huTX\",\"registration\":\"login-page_registration__EkhdD\",\"password\":\"login-page_password__3lnpO\",\"redirectmenu\":\"login-page_redirectmenu__1P7SD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"registration_form__3HuXS\",\"inputsfield\":\"registration_inputsfield__1n1mu\",\"pagestyle\":\"registration_pagestyle__22ewa\",\"header\":\"registration_header__3kpUk\",\"link\":\"registration_link__37u6P\",\"registration\":\"registration_registration__Clc_C\",\"password\":\"registration_password__3qKur\",\"redirectmenu\":\"registration_redirectmenu__3yBwO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagestyle\":\"recovery_pagestyle__3VoC_\",\"form\":\"recovery_form__1_jIp\",\"inputsfield\":\"recovery_inputsfield__3rL-V\",\"header\":\"recovery_header__3cqkG\",\"link\":\"recovery_link__29Ubt\",\"registration\":\"recovery_registration__3CiGz\",\"password\":\"recovery_password__2RgXi\",\"redirectmenu\":\"recovery_redirectmenu__2HBMh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagestyle\":\"reset_pagestyle__3ezUo\",\"form\":\"reset_form__A_2QX\",\"inputsfield\":\"reset_inputsfield__121RP\",\"header\":\"reset_header__3h97t\",\"link\":\"reset_link__3mynT\",\"registration\":\"reset_registration__23a_Z\",\"password\":\"reset_password__3ahTP\",\"redirectmenu\":\"reset_redirectmenu__3YZb4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerconstructor__conteiner\":\"burger-constructor_burgerconstructor__conteiner__1MMU9\",\"burgerconstructor__dropconteiner\":\"burger-constructor_burgerconstructor__dropconteiner__15tgs\",\"burgerconstructor__elements\":\"burger-constructor_burgerconstructor__elements__3XmY9\",\"burgerconstructor__elementswithscroll\":\"burger-constructor_burgerconstructor__elementswithscroll__2TYPO\",\"burgerconstructor__cost\":\"burger-constructor_burgerconstructor__cost__3KcpI\",\"burgerconstructor__modalheader\":\"burger-constructor_burgerconstructor__modalheader__3kgrI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient__item\":\"ingredient_ingredient__item__2G6q2\",\"ingredient__image\":\"ingredient_ingredient__image__17lHO\",\"ingredient__info\":\"ingredient_ingredient__info__2nXd9\",\"ingredient__text\":\"ingredient_ingredient__text__2TZQA\",\"link\":\"ingredient_link__3yERT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formelement\":\"form-element_formelement__bzkcN\",\"form\":\"form-element_form__26-11\",\"fieldset\":\"form-element_fieldset__3xYfK\",\"buttonconteiner\":\"form-element_buttonconteiner__3g4Np\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"modal_popup__2sn4l\",\"modal\":\"modal_modal__2IJ79\",\"popup__closeicon\":\"modal_popup__closeicon__OjrwG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger__tabs\":\"burger-ingredients_burger__tabs__1ZNnk\",\"burger__ingredients\":\"burger-ingredients_burger__ingredients__165oc\",\"burger__nav\":\"burger-ingredients_burger__nav__3aw0W\",\"modal__header\":\"burger-ingredients_modal__header__1EaVu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__qkrcs\",\"modal__header\":\"app_modal__header__28kNM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructoritem__element\":\"constructor-item_constructoritem__element__yhw1Q\",\"constructoritem__hoverelement\":\"constructor-item_constructoritem__hoverelement__3EDd2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loaderConteiner\":\"preloader_loaderConteiner__2o9Y3\",\"lds_ripple\":\"preloader_lds_ripple__3_rLK\",\"lds-ripple\":\"preloader_lds-ripple__367bF\"};"],"sourceRoot":""}